ScriptLoader.require({aScripts:[_ROOT_MIDP2_PATH_+"/../ex/webgl-2d.js",_ROOT_MIDP2_PATH_+"/../ex/numeric-1.2.6.js",],fnCallbackEnd:(function(){(function(b,g){var d=false;if((Device.IsAsus_AndroidBrowser||Device.isWindowsPhone)&&!Device.IsAsus_Zen4){d=true}Graphics.is3D=!d&&Device.webgl;if(!Graphics.is3D){b.GraphicsEX=Graphics;return}function a(h){this.m_HTMLCanvasElement=h;WebGL2D.enable(this.m_HTMLCanvasElement);this.m_CanvasRenderingContext2D=this.m_HTMLCanvasElement.getContext("webgl-2d");this.setDefault();this.m_PerspectiveShaderProgram=(function(m){var n={};var j=["attribute vec2 aVertCoord;","uniform mat4 uTransformMatrix;","varying vec2 vTextureCoord;","void main(void) {","    vTextureCoord = aVertCoord;","    gl_Position = uTransformMatrix * vec4(aVertCoord, 0.0, 1.0);","}"].join("\n");var l=m.createShader(m.VERTEX_SHADER);m.shaderSource(l,j);m.compileShader(l);if(!m.getShaderParameter(l,m.COMPILE_STATUS)){addError("Failed to compile vertex shader:"+m.getShaderInfoLog(l))}var k=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","void main(void)  {","    gl_FragColor = texture2D(uSampler, vTextureCoord);","}"].join("\n");var i=m.createShader(m.FRAGMENT_SHADER);m.shaderSource(i,k);m.compileShader(i);if(!m.getShaderParameter(i,m.COMPILE_STATUS)){addError("Failed to compile fragment shader:"+m.getShaderInfoLog(i))}n.shaderProgram=m.createProgram();m.attachShader(n.shaderProgram,l);m.attachShader(n.shaderProgram,i);m.linkProgram(n.shaderProgram);if(!m.getProgramParameter(n.shaderProgram,m.LINK_STATUS)){addError("Shader linking failed.")}n.vertexBuffer=m.createBuffer();m.useProgram(n.shaderProgram);n.vertAttrib=m.getAttribLocation(n.shaderProgram,"aVertCoord");n.transMatUniform=m.getUniformLocation(n.shaderProgram,"uTransformMatrix");n.samplerUniform=m.getUniformLocation(n.shaderProgram,"uSampler");return n})(this.m_CanvasRenderingContext2D)}LowAPI.extendClass(a,Graphics);b.GraphicsEX=a;var c=a;var f=a.prototype;function e(l,m){var j=numeric.transpose([[m[0].x,m[0].y,m[1].x,m[1].y,m[2].x,m[2].y,m[3].x,m[3].y]]);var h=[];for(var k=0;k<l.length;k++){h.push([l[k].x,0,-m[k].x*l[k].x,l[k].y,0,-m[k].x*l[k].y,1,0]);h.push([0,l[k].x,-m[k].y*l[k].x,0,l[k].y,-m[k].y*l[k].y,0,1])}return numeric.transpose(numeric.dot(numeric.inv(h),j))[0]}f.glDrawImagePerspective=function(h,s,r,B,A,H,E,l,k,z,y,D,C,I,F,n,m){var x=this._getContext2d();var J=this.m_PerspectiveShaderProgram;if(typeof m=="undefined"){z=0;y=0;D=h.width;C=0;I=0;F=h.height;n=h.width;m=h.height}x.useProgram(J.shaderProgram);var j=[{x:z/h.width,y:y/h.height},{x:D/h.width,y:C/h.height},{x:I/h.width,y:F/h.height},{x:n/h.width,y:m/h.height}];x.bindBuffer(x.ARRAY_BUFFER,J.vertexBuffer);var q=[];for(var w=0;w<j.length;w++){q.push(j[w].x);q.push(j[w].y)}var p=typeof J.vertices=="undefined";if(!p){for(var w=0;w<q.length;w++){if(q[w]!=J.vertices[w]){p=true;break}}}if(p){J.vertices=q;x.bufferData(x.ARRAY_BUFFER,new Float32Array(q),x.STATIC_DRAW)}var t=x.canvas.width;var G=x.canvas.height;var u=[{x:(2*s/t)-1,y:-(2*r/G)+1},{x:(2*B/t)-1,y:-(2*A/G)+1},{x:(2*H/t)-1,y:-(2*E/G)+1},{x:(2*l/t)-1,y:-(2*k/G)+1}];var o=e(j,u);x.enableVertexAttribArray(J.vertAttrib);x.vertexAttribPointer(J.vertAttrib,2,x.FLOAT,false,0,0);x.uniformMatrix4fv(J.transMatUniform,false,[o[0],o[1],0,o[2],o[3],o[4],0,o[5],0,0,0,0,o[6],o[7],0,1]);x.activeTexture(x.TEXTURE0);x.bindTexture(x.TEXTURE_2D,h.obj);x.uniform1i(J.samplerUniform,0);x.drawArrays(x.TRIANGLE_STRIP,0,4)};b.GraphicsEX=a}(window))}),fnCallbackError:(function(){}),});