(function(z,e){function r(g,B){r.__superclass__.call(this);this.m_frameCoheranceTimer=0;this.constructor(g,B)}LowAPI.extendClass(r,Canvas);r.statics=window;var p=null;var a=null;window.s_game_isPaused=false;var m=0;var j=0;var A=GLLibConfig.screenWidth;var i=GLLibConfig.screenHeight;var x=null;var f=false;var l=null;var c=LowAPI.Float2Int(1000/GLLibConfig.FPSLimiter);window.s_game_frameDT=0;var b=0;window.s_game_totalExecutionTime=0;var t=0;var k=null;r.prototype.handleMessage=function(){var B=this;var g=GameState.getCurrentState();if(g!=null){g.handleMessage.apply(g,arguments)}else{Warn("The message was sent to an unknown state.")}};r.prototype.Game_update=function(){throw new Error("GLLib.prototype.Game_update() # abstract function called: must be overriden!")};r.prototype.Game_Loop=function(){if(!s_game_isPaused){this.repaint();GLLibPlayer.Snd_Update()}};r.prototype.constructor=function(g,B){Dbg("GLLib.constructor");k=this;m=-1;l=g;x=B;this.SetupDisplay();b=System.currentTimeMillis();this.m_frameCoheranceTimer=b};r.prototype.Init=function(){if(m>=0){return}A=GLLibConfig.screenWidth;i=GLLibConfig.screenHeight;if(GLLibConfig.sprite_useSingleImageForAllModules||GLLibConfig.pfx_enableFrameCaching||GLLibConfig.pfx_enableModuleCaching){s()}Math_RandSetSeed(System.currentTimeMillis());m=0;this.SetupDisplay();this.run()};r.prototype.UnInit=function(){};r.prototype.Pause_GLLib=function(){if(!s_game_isPaused){s_game_isPaused=true;Dbg("GLLib.Pausing");GLLibPlayer.Snd_PauseNotify()}};r.prototype.Resume_GLLib=function(){if(s_game_isPaused){Dbg("GLLib.Resuming");var g=System.currentTimeMillis();j=g;b=g;this.m_frameCoheranceTimer=g;s_game_isPaused=false;this.SetupDisplay();if((GLLibConfig.useRepaintAtResume)&&(!f)){this.repaint()}}};r.prototype.hideNotify=function(){this.Pause_GLLib()};r.prototype.showNotify=function(){this.Resume_GLLib()};r.prototype.SetupDisplay=function(){if(!GLLibConfig.MIDP2forceNonFullScreen){this.setFullScreenMode(true)}if(x!=null){if(x.getCurrent()!=this){x.setCurrent(this)}}};r.prototype.run=function(){if(this.catchThrowError){if(this.catchThrowError.stack){Err("ERROR #"+this.catchThrowError.stack)}else{Err("ERROR # "+this.catchThrowError)}throw this.catchThrowError}if(this.run_proxy==e){this.run_proxy=LowAPI.proxy(this.run,this)}if(!window.s_use_canvas_loopTimeOut){window.requestAnimFrame(this.run_proxy)}try{var g=System.currentTimeMillis();if(c<=(g-this.m_frameCoheranceTimer)){this.m_frameCoheranceTimer=g;this.Game_Loop()}}catch(B){m=-1;this.UnInit();if(!GLLibConfig.disableNotifyDestroyed){l.notifyDestroyed()}this.catchThrowError=B}if(window.s_use_canvas_loopTimeOut){window.requestAnimFrame(this.run_proxy)}};r.prototype.paint=function(g){this.Game_Paint(g)};r.prototype.Game_Paint=function(B){if(s_game_isPaused||f){return}f=true;j=System.currentTimeMillis();s_game_frameDT=(j-b);if(s_game_frameDT<0){s_game_frameDT=0}if(s_game_frameDT>1000){s_game_frameDT=1000}b=j;s_game_totalExecutionTime+=s_game_frameDT;t++;try{p=a=B;this.Game_update()}catch(g){m=-1;throw g}finally{f=false}};var h=null;var v=(3988292384).castToInt();function s(){h=[];for(var B=0;B<256;B++){var C=B;for(var g=8;g>0;g--){if((C&1)==1){C=(C>>>1)^v}else{C=(C>>>1)}}h[B]=C}}var o=0;function y(g){o=g}function d(F,B,G,C,E){var D=F.getColor();F.setARGBColor(o);F.fillRect(B,G,C,E);F.setColor(D)}function q(){if(arguments){switch(arguments.length){case 7:return w.apply(this,arguments);case 8:return u.apply(this,arguments)}}throw new Error("InvalidArguments")}function w(g,G,B,E,D,C,F){q(p,g,G,B,E,D,C,F)}function u(R,G,F,H,Q,K,J,T){var N=(K>>16)&255;var B=(K>>8)&255;var E=(K>>0)&255;var L=(J>>16)&255;var V=(J>>8)&255;var D=(J>>0)&255;var I=L-N;var S=V-B;var U=D-E;var P=G+H-1;var C=F+Q-1;var O;N<<=16;B<<=16;E<<=16;if(T==LEFT){O=P-G;I=LowAPI.Float2Int((I<<16)/O);S=LowAPI.Float2Int((S<<16)/O);U=LowAPI.Float2Int((U<<16)/O);for(var M=P;M>=G;M--){SetColor(R,(N>>16),(B>>16),(E>>16));DrawLine(R,M,F,M,C);N+=I;B+=S;E+=U}}else{if(T==RIGHT){O=P-G;I=LowAPI.Float2Int((I<<16)/O);S=LowAPI.Float2Int((S<<16)/O);U=LowAPI.Float2Int((U<<16)/O);for(var M=G;M<=P;M++){SetColor(R,(N>>16),(B>>16),(E>>16));DrawLine(R,M,F,M,C);N+=I;B+=S;E+=U}}else{if(T==TOP){O=C-F;I=LowAPI.Float2Int((I<<16)/O);S=LowAPI.Float2Int((S<<16)/O);U=LowAPI.Float2Int((U<<16)/O);for(var M=C;M>=F;M--){SetColor(R,(N>>16),(B>>16),(E>>16));DrawLine(R,G,M,P,M);N+=I;B+=S;E+=U}}else{if(T==BOTTOM){O=C-F;I=LowAPI.Float2Int((I<<16)/O);S=LowAPI.Float2Int((S<<16)/O);U=LowAPI.Float2Int((U<<16)/O);for(var M=F;M<=C;M++){SetColor(R,(N>>16),(B>>16),(E>>16));DrawLine(R,G,M,P,M);N+=I;B+=S;E+=U}}}}}}(function n(){Object.defineProperty(z,"g",{get:function(){return p},set:function(g){throw new Error("Not allow!")}});Object.defineProperty(z,"s_screenWidth",{get:function(){return A},set:function(g){throw new Error("Not allow!")}});Object.defineProperty(z,"s_screenHeight",{get:function(){return i},set:function(g){throw new Error("Not allow!")}});Object.defineProperty(z,"s_game_timeWhenFrameStart",{get:function(){return j},set:function(g){throw new Error("Not allow!")}});Object.defineProperty(z,"s_game_currentFrameNB",{get:function(){return t},set:function(g){throw new Error("Not allow!")}});Object.defineProperty(z,"s_gllib_instance",{get:function(){return k},set:function(g){throw new Error("Not allow!")}})})();LowAPI.extendObject(z,{GLLib:r,AlphaRect_SetColor:y,AlphaRect_Draw:d,DrawGradientRect:q,},true)})(window);