(function(c,b){var h=-480;var f=480;var d=-480;var m=6;var a=1000;var k=0;function e(){e.__superclass__.call(this,e.ID,arguments);this.setListenerStateMessage(GameState.MESSAGE_INIT,this.INIT);this.setListenerStateMessage(GameState.MESSAGE_UPDATE,this.UPDATE);this.setListenerStateMessage(GameState.MESSAGE_PAINT,this.PAINT);this.setListenerStateMessage(GameState.MESSAGE_EXIT,this.EXIT)}LowAPI.extendClass(e,GameState);e.ID=GameState.genID();e.prototype.INIT=function(){Input_Reset();resetGame();guiMgr_SetLayerActiveStateAll(false);guiMgr_ResetAllGUILayers();guiMgr_ActivateGUILayer(GUI_LAYER.INTRO_FRONT,true,false);StopSound(SOUND_MODE.MUSIC,false);k=0};e.prototype.UPDATE=function(){if((k<3)&&(s_iGameStateTime>(k*a))){guiMgr_ActivateGUILayer(GUI_LAYER.INTRO_1+k,true,true);k++;if(k>1){playSound(SOUND_TYPE.EXPLOIT_COMPLETE_SFX,false)}}guiMgr_processInputAllGuiLayers();guiMgr_updateLayers()};e.prototype.PAINT=function(){SetColor(4278190080);FillRect(g,0,0,s_screenWidth,s_screenHeight);guiMgr_PaintGUILayers()};e.prototype.EXIT=function(){guiMgr_ActivateGUILayer(GUI_LAYER.INTRO_FRONT,false);guiMgr_ActivateGUILayer(GUI_LAYER.INTRO_1,false);guiMgr_ActivateGUILayer(GUI_LAYER.INTRO_2,false);guiMgr_ActivateGUILayer(GUI_LAYER.INTRO_3,false)};_register_gui_message(GameData.k_gameIntro_Front,i);function i(q,p){if(q==GUI_MESSAGE_INITIALIZE){guiMgr_layerOffsetData[GUI_LAYER.INTRO_FRONT][GUILAYER_DATA_TIMER]=a;s_showCantGoBack=false;s_showCantGoBack_Time=0}if(q==GUI_MESSAGE_UPDATE){guiMgr_layerOffsetData[GUI_LAYER.INTRO_FRONT][GUILAYER_DATA_TIMER]-=s_game_frameDT;if(guiMgr_layerOffsetData[GUI_LAYER.INTRO_FRONT][GUILAYER_DATA_TIMER]<0){guiMgr_layerOffsetData[GUI_LAYER.INTRO_FRONT][GUILAYER_DATA_TIMER]=0}var r;if(guiMgr_layerOffsetData[GUI_LAYER.INTRO_FRONT][GUILAYER_DATA_TIMER]<=0){r=((System.currentTimeMillis()&(1<<8))!=0)}else{r=false}SetTextAreaVisibility(GameData.k_gameIntro_Front,GameData.k_Intro_Front_Txt_TouchToContinue,r);if(s_showCantGoBack){SetTextAreaVisibility(GameData.k_gameIntro_Front,GameData.k_Intro_Front_txt_CantGoBack,r);s_showCantGoBack_Time+=s_game_frameDT;if(s_showCantGoBack_Time>MAX_CANTGOBACK_TIME){s_showCantGoBack=false;s_showCantGoBack_Time=0;SetTextAreaVisibility(GameData.k_gameIntro_Front,GameData.k_Intro_Front_txt_CantGoBack,false)}}}if(q==GUI_MESSAGE_INPUT_EVENT){if((guiMgr_layerOffsetData[GUI_LAYER.INTRO_FRONT][GUILAYER_DATA_TIMER]<=0)&&Input_CheckState_SYNC(INPUT_FLAG_RELEASED)){s_showCantGoBack=false;s_showCantGoBack_Time=0;GameState.scheduleSwitchState(GameState_GAMEPLAY.ID,true,true);playSound(SOUND_TYPE.SELECT_SFX,false)}}}_register_gui_message(GameData.k_gameIntro_1,o);function o(q,p){if(q==GUI_MESSAGE_INTRO){guiMgr_SetGUILayerState(GUI_LAYER.INTRO_1,GUI_STATE_INTRO);guiMgr_layerOffsetData[GUI_LAYER.INTRO_1][GUILAYER_DATA_GLOBALOFFSETX]=-h}if(q==GUI_MESSAGE_UPDATE){var r=guiMgr_GetGUILayerState(GUI_LAYER.INTRO_1);switch(r){case GUI_STATE_INTRO:guiMgr_layerOffsetData[GUI_LAYER.INTRO_1][GUILAYER_DATA_GLOBALOFFSETX]=LowAPI.Float2Int(guiMgr_layerOffsetData[GUI_LAYER.INTRO_1][GUILAYER_DATA_GLOBALOFFSETX]/2);if(guiMgr_layerOffsetData[GUI_LAYER.INTRO_1][GUILAYER_DATA_GLOBALOFFSETX]==0){guiMgr_SetGUILayerState(GUI_LAYER.INTRO_1,GUI_STATE_IDLE)}break;case GUI_STATE_IDLE:break}}}_register_gui_message(GameData.k_gameIntro_2,l);function l(q,p){if(q==GUI_MESSAGE_INTRO){guiMgr_SetGUILayerState(GUI_LAYER.INTRO_2,GUI_STATE_INTRO);guiMgr_layerOffsetData[GUI_LAYER.INTRO_2][GUILAYER_DATA_GLOBALOFFSETX]=-f}if(q==GUI_MESSAGE_UPDATE){var r=guiMgr_GetGUILayerState(GUI_LAYER.INTRO_2);switch(r){case GUI_STATE_INTRO:guiMgr_layerOffsetData[GUI_LAYER.INTRO_2][GUILAYER_DATA_GLOBALOFFSETX]=LowAPI.Float2Int(guiMgr_layerOffsetData[GUI_LAYER.INTRO_2][GUILAYER_DATA_GLOBALOFFSETX]/2);if(guiMgr_layerOffsetData[GUI_LAYER.INTRO_2][GUILAYER_DATA_GLOBALOFFSETX]==0){guiMgr_SetGUILayerState(GUI_LAYER.INTRO_2,GUI_STATE_IDLE)}break;case GUI_STATE_IDLE:break}}}_register_gui_message(GameData.k_gameIntro_3,j);function j(q,p){if(q==GUI_MESSAGE_INTRO){guiMgr_SetGUILayerState(GUI_LAYER.INTRO_3,GUI_STATE_INTRO);guiMgr_layerOffsetData[GUI_LAYER.INTRO_3][GUILAYER_DATA_GLOBALOFFSETX]=-d;SetParamValue(GameData.k_gameIntro_3,GameData.k_Intro_3_Gfx_Character,GtsData.GUI_GRAPHITEM_SPRITEID,DATA.SPRITE_DATA_INTRO_CHA00+s_game_characterIndex);s_iIntro_CharPosOriginal=GetParamValue(GameData.k_gameIntro_3,GameData.k_Intro_3_Gfx_Character,GtsData.GUI_POSX);s_iIntro_CharMoveTime=0}if(q==GUI_MESSAGE_UPDATE){var r=guiMgr_GetGUILayerState(GUI_LAYER.INTRO_3);switch(r){case GUI_STATE_INTRO:guiMgr_layerOffsetData[GUI_LAYER.INTRO_3][GUILAYER_DATA_GLOBALOFFSETX]=LowAPI.Float2Int(guiMgr_layerOffsetData[GUI_LAYER.INTRO_3][GUILAYER_DATA_GLOBALOFFSETX]/2);if(guiMgr_layerOffsetData[GUI_LAYER.INTRO_3][GUILAYER_DATA_GLOBALOFFSETX]==0){guiMgr_SetGUILayerState(GUI_LAYER.INTRO_3,GUI_STATE_IDLE)}break;case GUI_STATE_IDLE:s_iIntro_CharMoveTime+=s_game_frameDT;SetParamValue(GameData.k_gameIntro_3,GameData.k_Intro_3_Gfx_Character,GtsData.GUI_POSX,LowAPI.Float2Int(s_iIntro_CharPosOriginal+(m*s_iIntro_CharMoveTime)/1000));break}}}function n(p){if(s_iIntroState==GAME_INTROSTATE_IN_HEADSTART){if(s_FeverModeEffect!=null){s_FeverModeEffect.Remove()}}switch(p){case GAME_INTROSTATE_IN_HEADSTART:playSound(SOUND_TYPE.FEVER_ACTIVATE_SFX,false);s_FeverModeEffect=cActor.VisualActor_CreateAnimFx(0,0,-10,DATA.SPRITE_DATA_GOLD_EFFECT,GOLD_EFFECT.ANIM_GOLD_MERGE,IActorLists.EFFECTS,0,100000,true);cam_SetDepthFollowData(CAM_SPEEDUP_EFFECT_TIME,s_camDistOffsetFP,CAM_SPEEDUP_EFFECT_AMPLITUDE,0);break;case GAME_INTROSTATE_INTRO_OVER:if(s_iIntroState==GAME_INTROSTATE_IN_HEADSTART){if(s_bCurrentHeadstartBig){s_iDistInLevel=s_arrayTweaks[ITweaks.DISTANCE_PER_ENVIRONMENT][0];s_iDistInEnvironment=s_arrayTweaks[ITweaks.DISTANCE_PER_ENVIRONMENT][0]}else{s_iDistInLevel=s_arrayTweaks[ITweaks.DISTANCE_PER_ENVIRONMENT][0]/3;s_iDistInEnvironment=s_arrayTweaks[ITweaks.DISTANCE_PER_ENVIRONMENT][0]/3}Dbg("cGame_gameplayUtils.h:"+3133+":Exiting headstart - s_iDistInEnvironment:"+s_iDistInEnvironment)}break}s_iIntroState=p}LowAPI.extendObject(c,{GameState_INTRO:e,introState_setState:n,},true)})(window);