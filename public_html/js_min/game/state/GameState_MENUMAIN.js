(function(a,g){var d=false;var c=true;function b(){b.__superclass__.call(this,b.ID,arguments);this.setListenerStateMessage(GameState.MESSAGE_INIT,this.INIT);this.setListenerStateMessage(GameState.MESSAGE_UPDATE,this.UPDATE);this.setListenerStateMessage(GameState.MESSAGE_PAINT,this.PAINT);this.setListenerStateMessage(GameState.MESSAGE_EXIT,this.EXIT);this.setListenerStateMessage(GameState.MESSAGE_SHOWNOTIFY,this.SHOWNOTIFY)}LowAPI.extendClass(b,GameState);b.ID=GameState.genID();var e=6000;b.prototype.SHOWNOTIFY=function(){playSound(SOUND_TYPE.MENU_SFX,true)};b.prototype.INIT=function(){if(c){dataLayer.push({event:"ga_event",ga_category:"Gamepage",ga_action:"Main Menu",ga_label:window.productTitle,ga_noninteraction:true});this.trackingGameReturn()}c=false;guiMgr_SetLayerActiveStateAll(false);guiMgr_ResetAllGUILayers();Input_Init();resetSound(0);guiMgr_ActivateGUILayer(GUI_LAYER.MENUMAIN,true);StopSound(SOUND_MODE.MUSIC);if(e>0){playSound(SOUND_TYPE.SPLASH_MUSIC,false)}Display.freeSplash()};b.prototype.UPDATE=function(){if(e<=0){if(!isPlaying(SOUND_TYPE.MENU_SFX)){playSound(SOUND_TYPE.MENU_SFX,true)}}else{e-=s_game_frameDT;e=Math_Max(0,e)}guiMgr_processInputAllGuiLayers();guiMgr_updateLayers();gui_UpdateGameLayerAnims(GameData.k_gameMenuMain)};b.prototype.PAINT=function(){guiMgr_PaintGUILayers()};b.prototype.EXIT=function(){if(!isPlaying(SOUND_TYPE.SPLASH_MUSIC)){resetSound(0)}e=0;guiMgr_ActivateGUILayer(GUI_LAYER.MENUMAIN,false)};b.prototype.zeropad=function(o,m){var k=(o<0?"-":"");if(o<0){o=-o}var l=m-o.toString().length;for(var j=0;j<l;j++){k+="0"}return(k+o.toString())};b.prototype.trackingGameReturn=function(){var m=new Date();var o=m.getTime();var n=Rms_Read(productKey+"gameReturn_lastPlayInDays");var l="";var k=Rms_Read(productKey+"gameReturn_firstDayInDays");var j=Rms_Read(productKey+"gameReturn_firstDayGTM");var i="Dxx";if(k==0){k=n=Math.ceil(o/(24*60*60*1000));j=""+m.getFullYear()+this.zeropad(m.getMonth()+1,2)+this.zeropad(m.getDate(),2);i="D00";Rms_Write(productKey+"gameReturn_lastPlayInDays",n);Rms_Write(productKey+"gameReturn_firstDayGTM",j);Rms_Write(productKey+"gameReturn_firstDayInDays",k);dataLayer.push({event:"ga_event",ga_category:"Gamepage",ga_action:"Return",ga_label:window.productTitle,ga_noninteraction:true,days:i})}else{n=Number(Rms_Read(productKey+"gameReturn_lastPlayInDays"));j=Number(Rms_Read(productKey+"gameReturn_firstDayGTM"));k=Number(Rms_Read(productKey+"gameReturn_firstDayInDays"));l=Math.ceil(o/(24*60*60*1000));if(l>n){i="D"+this.zeropad((l-k),2);n=l;Rms_Write(productKey+"gameReturn_lastPlayInDays",n);dataLayer.push({event:"ga_event",ga_category:"Gamepage",ga_action:"Return",ga_label:window.productTitle,ga_noninteraction:true,days:i})}}};_register_gui_message(GameData.k_gameMenuMain,f);function f(k,j){if(k==GUI_MESSAGE_INITIALIZE){SetButtonVisibility(GameData.k_gameMenuMain,GameData.k_MenuMain_BtnFacebook,false);gui_ResetAllLayerButtonsPressedState();guiMgr_SetLayerInputBlockState(guiMgr_GetGUILayerIndex(guiMgr_iCurrentLayerType),true);guiMgr_SetLayerPaintBlockState(guiMgr_GetGUILayerIndex(guiMgr_iCurrentLayerType),true);SetParamValue(GameData.k_gameMenuMain,GameData.k_MenuMain_btnPlay,GtsData.GUI_GRAPHITEM_FRAMEID,s_iCurrentLanguage);SetParamValue(GameData.k_gameMenuMain,GameData.k_MenuMain_btnPlay,GtsData.GUI_BUTTON_FRAMEIDPRESSED,s_iCurrentLanguage);SetParamValue(GameData.k_gameMenuMain,GameData.k_MenuMain_gfxShopButton,GtsData.GUI_GRAPHITEM_FRAMEID,0+(s_iCurrentLanguage*3));SetParamValue(GameData.k_gameMenuMain,GameData.k_MenuMain_gfxShopButton_shadow,GtsData.GUI_GRAPHITEM_FRAMEID,0+(s_iCurrentLanguage*3));SetParamValue(GameData.k_gameMenuMain,GameData.k_MenuMain_gfxGoalsButton,GtsData.GUI_GRAPHITEM_FRAMEID,1+(s_iCurrentLanguage*3));SetParamValue(GameData.k_gameMenuMain,GameData.k_MenuMain_gfxGoalsButton_shadow,GtsData.GUI_GRAPHITEM_FRAMEID,1+(s_iCurrentLanguage*3));SetParamValue(GameData.k_gameMenuMain,GameData.k_MenuMain_gfxLeaderboardsButton,GtsData.GUI_GRAPHITEM_FRAMEID,2+(s_iCurrentLanguage*3));SetParamValue(GameData.k_gameMenuMain,GameData.k_MenuMain_gfxLeaderboardssButton_shadow,GtsData.GUI_GRAPHITEM_FRAMEID,2+(s_iCurrentLanguage*3));SetButtonVisibility(GameData.k_gameMenuMain,GameData.k_MenuMain_gfxLeaderboardsButton,false);SetButtonEnabled(GameData.k_gameMenuMain,GameData.k_MenuMain_btnLeaderboards,false);SetButtonVisibility(GameData.k_gameMenuMain,GameData.k_MenuMain_btnMoreGames,false);SetButtonEnabled(GameData.k_gameMenuMain,GameData.k_MenuMain_btnMoreGames,false);SetButtonVisibility(GameData.k_gameMenuMain,GameData.k_MenuMain_btnInbox,false);SetGraphItemVisibility(GameData.k_gameMenuMain,GameData.k_MenuMain_gfxpromo,false);SetTextAreaVisibility(GameData.k_gameMenuMain,GameData.k_MenuMain_txtPromo,false)}if(k==GUI_MESSAGE_UPDATE){SetButtonVisibility(GameData.k_gameMenuMain,GameData.k_MenuMain_btnMoneyCheat,d);SetButtonVisibility(GameData.k_gameMenuMain,GameData.k_MenuMain_btnDiamondsCheat,d);SetButtonText(GameData.k_gameMenuMain,GameData.k_MenuMain_btnMoneyCheat,"+ COINS\nCHEAT");SetButtonText(GameData.k_gameMenuMain,GameData.k_MenuMain_btnDiamondsCheat,"+ DIAMONDS\nCHEAT")}if(k==GUI_MESSAGE_AFTER_PAINT){}if(k==GUI_MESSAGE_INPUT_EVENT){switch(j){case GameData.k_MenuMain_btnPlay:dataLayer.push({event:"ga_event",ga_category:"Gamepage",ga_action:"Start",ga_label:window.productTitle,ga_noninteraction:false});if(typeof gdsdk!=="undefined"&&gdsdk.showAd!=="undefined"){window.s_game_isPaused=!false;StopAllSound();window.addEventListener("SDK_GAME_START",function(m){window.s_game_isPaused=false;s_didPlayTigersSound=false;playSound(SOUND_TYPE.PLAY_SFX,false);GameState.scheduleSwitchState(GameState_INTRO.ID,true,true)});gdsdk.showAd()}else{s_didPlayTigersSound=false;playSound(SOUND_TYPE.PLAY_SFX,false);GameState.scheduleSwitchState(GameState_INTRO.ID,true,true)}break;case GameData.k_MenuMain_btnShop:playSound(SOUND_TYPE.SELECT_SFX,false);GameState.scheduleSwitchState(GameState_UPGRADES.ID,true,true);break;case GameData.k_MenuMain_btnProfile:playSound(SOUND_TYPE.SELECT_SFX,false);GameState.scheduleSwitchState(GameState_EXPLOITS.ID,true,true);break;case GameData.k_MenuMain_btnOptions:StopAllSound();playSound(SOUND_TYPE.SELECT_SFX,false);GameState.scheduleSwitchState(GameState_OPTIONS.ID,true,true);break;case GameData.k_MenuMain_btnLeaderboards:break;case GameData.k_MenuMain_btnMoreGames:playSound(SOUND_TYPE.SELECT_SFX,false);window.location=h();break;case GameData.k_MenuMain_btnHelp:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,"Help/ Not implemented yet!");break;case GameData.k_MenuMain_btnMoneyCheat:var l=DecodeInt(s_systemCoins);l+=10000;s_systemCoins=EncodeInt(l);l=DecodeInt(s_systemTotalCoins);l+=10000;s_systemTotalCoins=EncodeInt(l);GameVars_SaveAll();break;case GameData.k_MenuMain_btnDiamondsCheat:var i=DecodeInt(s_systemDiamonds);i+=50;s_systemDiamonds=EncodeInt(i);GameVars_SaveAll();break}}}function h(){window.referrer=getCookie("root_referrer");if(window.referrer!=""){console.log("referal from cookie: "+window.referrer)}else{var j=document.referrer;if(j!=""){setCookie("root_referrer",j);window.referrer=j;console.log("save referal from document: "+window.referrer)}else{var i=window.location.search;window.referrer="https://play.ludigames.com"+i;console.log("default referal: "+window.referrer)}}return window.referrer}LowAPI.extendObject(a,{GameState_MENUMAIN:b,},true)})(window);