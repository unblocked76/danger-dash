(function(a,i){var e=false;function b(){b.__superclass__.call(this,b.ID,arguments);this.setListenerStateMessage(GameState.MESSAGE_INIT,this.INIT);this.setListenerStateMessage(GameState.MESSAGE_UPDATE,this.UPDATE);this.setListenerStateMessage(GameState.MESSAGE_PAINT,this.PAINT);this.setListenerStateMessage(GameState.MESSAGE_EXIT,this.EXIT)}LowAPI.extendClass(b,GameState);b.ID=GameState.genID();var f=6000;b.prototype.INIT=function(){if(!s_claimable||s_claimInARow>20){GameState.scheduleSwitchState(GameState_MENUMAIN.ID,true,true);return}guiMgr_SetLayerActiveStateAll(false);guiMgr_ResetAllGUILayers();Input_Init();resetSound(0);guiMgr_ActivateGUILayer(GUI_LAYER.DAILY_BONUS,true);var k=GetNumLayerElements(guiMgr_iCurrentLayerType);var j=(k-1);for(j;j>=0;j--){switch(GetType(guiMgr_iCurrentLayerType,j)){case GtsData.GUI_BUTTON:SetButtonEnabled(guiMgr_iCurrentLayerType,j,false);if(j==GameData.k_Daily_Bonus_btnClaimReward){SetButtonEnabled(guiMgr_iCurrentLayerType,j,true);SetButtonText(guiMgr_iCurrentLayerType,j,TEXT.MAIN_Claim)}if(j>=GameData.k_Daily_Bonus_btnDay1&&j<GameData.k_Daily_Bonus_btnDay1+s_claimInARow){SetButtonEnabled(guiMgr_iCurrentLayerType,j,true)}if(j>=GameData.k_Daily_Bonus_rewardDay1&&j<GameData.k_Daily_Bonus_rewardDay1+s_claimInARow){SetButtonEnabled(guiMgr_iCurrentLayerType,j,true)}if(j>=GameData.k_Daily_Bonus_BtnClaimed1&&j<GameData.k_Daily_Bonus_BtnClaimed1+s_claimInARow-1){SetButtonVisibility(guiMgr_iCurrentLayerType,j,true)}if(j>=GameData.k_Daily_Bonus_CoinDay1&&j<GameData.k_Daily_Bonus_CoinDay1+s_claimInARow){SetButtonEnabled(guiMgr_iCurrentLayerType,j,true)}break}}SetGraphItemVisibility(guiMgr_iCurrentLayerType,GameData.k_Daily_Bonus_gfx_Background,true);StopSound(SOUND_MODE.MUSIC);if(f>0){playSound(SOUND_TYPE.SPLASH_MUSIC,false)}};b.prototype.UPDATE=function(){guiMgr_processInputAllGuiLayers();guiMgr_updateLayers();gui_UpdateGameLayerAnims(GameData.k_gameMenuMain)};b.prototype.PAINT=function(){s_ASpriteArray[DATA.SPRITE_DATA_LOADING_SPLASH].PaintFrame(g,0,0,0,0);guiMgr_PaintGUILayers()};b.prototype.EXIT=function(){guiMgr_ActivateGUILayer(GUI_LAYER.DAILY_BONUS,false)};_register_gui_message(GameData.k_gameDaily_Bonus,h);function h(k,j){if(k==GUI_MESSAGE_INITIALIZE){gui_ResetAllLayerButtonsPressedState()}if(k==GUI_MESSAGE_UPDATE){guiMgr_PaintGUILayers()}if(k==GUI_MESSAGE_AFTER_PAINT){}if(k==GUI_MESSAGE_INPUT_EVENT){switch(j){case GameData.k_Daily_Bonus_btnClaimReward:playSound(SOUND_TYPE.SELECT_SFX,false);d();s_claimable=0;GameVars_SetRecordValue(RMS_RECORD_CLAIMABLE,s_claimable,true);GameVars_SaveAll();break}}}function d(){var l=GetNumLayerElements(guiMgr_iCurrentLayerType);var j=(l-1);var k=GetParamValue(guiMgr_iCurrentLayerType,GameData.k_Daily_Bonus_rewardDay1+s_claimInARow-1,GtsData.GUI_BUTTON_FRAMEID);switch(k){case IReward.COIN_BAG:case IReward.COIN:if(s_claimInARow==3){var m=Math.round(Math_Rand(500,3000)/100)*100;s_systemCoins+=m;console.log("randomCoinBag  3       = "+m);msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,getString(TEXT.MAIN_Claim)+": "+m+" "+getString(TEXT.MAIN_COINS),MSGBOX_CALLBACK.DAILY_BOSNUS_CONFIRM)}else{if(s_claimInARow==8){var m=Math.round(Math_Rand(1250,4500)/100)*100;s_systemCoins+=m;console.log("randomCoinBag   8      = "+m);msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,getString(TEXT.MAIN_Claim)+": "+m+" "+getString(TEXT.MAIN_COINS),MSGBOX_CALLBACK.DAILY_BOSNUS_CONFIRM)}else{if(s_claimInARow==13){var m=Math.round(Math_Rand(2000,6000)/100)*100;s_systemCoins+=m;console.log("randomCoinBag   13      = "+m);msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,getString(TEXT.MAIN_Claim)+": "+m+" "+getString(TEXT.MAIN_COINS),MSGBOX_CALLBACK.DAILY_BOSNUS_CONFIRM)}else{if(s_claimInARow==18){var m=Math.round(Math_Rand(4000,10000)/100)*100;s_systemCoins+=m;console.log("randomCoinBag   18      = "+m);msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,getString(TEXT.MAIN_Claim)+": "+m+" "+getString(TEXT.MAIN_COINS),MSGBOX_CALLBACK.DAILY_BOSNUS_CONFIRM)}else{s_systemCoins+=s_arrayTweaks[ITweaks.REWARD_DAY_1+s_claimInARow-1][0];msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,getString(TEXT.MAIN_Claim)+": "+s_arrayTweaks[ITweaks.REWARD_DAY_1+s_claimInARow-1][0]+" "+getString(TEXT.MAIN_COINS),MSGBOX_CALLBACK.DAILY_BOSNUS_CONFIRM)}}}}break;case IReward.BOOST:s_game_boost_bonus=true;msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,getString(TEXT.MAIN_Claim)+": "+getString(TEXT.MAIN_SCORE_BOOSTER),MSGBOX_CALLBACK.DAILY_BOSNUS_CONFIRM);break;case IReward.NEW_CHAR:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,getString(TEXT.MAIN_Claim)+": "+getString(TEXT.MAIN_HELP_5_TITLE),MSGBOX_CALLBACK.DAILY_BOSNUS_CONFIRM);Characters_DoBuyCharacter(2);GameVars_SaveAll();break;case IReward.ANKH:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,getString(TEXT.MAIN_Claim)+": "+getString(TEXT.MAIN_STATS_ANKH),MSGBOX_CALLBACK.DAILY_BOSNUS_CONFIRM);s_game_ankh_bonus=true;break;case IReward.TIGER:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,getString(TEXT.MAIN_Claim)+": "+getString(TEXT.MAIN_STATS_MOUNT),MSGBOX_CALLBACK.DAILY_BOSNUS_CONFIRM);break}}function c(j){if(j/1000>0){return 4}else{return 3}}LowAPI.extendObject(a,{GameState_DAILY_BONUS:b,},true)})(window);