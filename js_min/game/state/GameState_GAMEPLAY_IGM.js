(function(H,k){window.numberOfRetry=0;_register_gui_message(GameData.k_gameMenu_Ingame,M);function M(R,Q){if(R==GUI_MESSAGE_INITIALIZE){StopAllSound();gui_ResetAllLayerButtonsPressedState();J(IMenu_Ingame.STATE_START);moneyIconX=GetParamValue(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_gfx_MoneyIcon,GtsData.GUI_POSX);moneyIconY=GetParamValue(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_gfx_MoneyIcon,GtsData.GUI_POSY);multiplierX=GetParamValue(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_gfx_Multiplier,GtsData.GUI_POSX);multiplierY=GetParamValue(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_gfx_Multiplier,GtsData.GUI_POSY);coinBarX=GetParamValue(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_gfx_CoinBar_bg,GtsData.GUI_POSX);coinBarY=GetParamValue(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_gfx_CoinBar_bg,GtsData.GUI_POSY);s_ASpriteArray[DATA.SPRITE_DATA_UI].GetFrameRect(coinBarRect,UI.FRAME_LIFE_BAR_BG,coinBarX,coinBarY,0);coinBarLeft=coinBarX;coinBarHeight=coinBarRect[3]-coinBarRect[1];coinBarWidth=0;coinBarFullWidth=coinBarRect[2]-coinBarX;s_mFeverBarAnim=new GLLibPlayer(s_ASpriteArray[DATA.SPRITE_DATA_UI],coinBarX,coinBarY);s_mFeverBarAnim.SetAnim(UI.ANIM_FEVER,-1);SetButtonVisibility(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_BtnShowCheats,false);SetButtonText(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_BtnShowCheats,"CHEATS")}if(R==GUI_MESSAGE_UPDATE){gui_UpdateGameLayerAnims(GameData.k_gameMenu_Ingame);if(s_mFeverBarAnim!=null){s_mFeverBarAnim.Update(s_game_frameDT)}s_iHUDBlinkTimer=(s_iHUDBlinkTimer+s_game_frameDT);if(s_iHUDBlinkTimer>=10000){s_iHUDBlinkTimer-=10000}var O=DecodeInt(s_game_coinBar)>=s_arrayTweaks[ITweaks.COIN_BAR_SIZE][0];var P=(!s_isFeverMode&&O)&&!s_isGamePaused;SetButtonVisibility(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_Btn_fever,P);SetGraphItemVisibility(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_gfx_fever,P);SetGraphItemVisibility(GameData.k_gameMenu_Ingame,GameData.k_Menu_Ingame_gfx_feverPulse,P);N()}if(R==GUI_MESSAGE_AFTER_PAINT){coinBarWidth=LowAPI.Float2Int((coinBarFullWidth*DecodeInt(s_game_coinBar))/s_arrayTweaks[ITweaks.COIN_BAR_SIZE][0]);coinBarClip=coinBarLeft+coinBarWidth;coinBarPalette=0;s_ASpriteArray[DATA.SPRITE_DATA_UI].SetCurrentPalette(coinBarPalette);SetClip(0,0,coinBarClip,GLLibConfiguration.screenHeight);var O=DecodeInt(s_game_coinBar)>=s_arrayTweaks[ITweaks.COIN_BAR_SIZE][0];if(s_isFeverMode||O){if(O){s_mFeverBarAnim.SetPalette(((s_iHUDBlinkTimer&(1<<8))!=0)?1:0)}else{s_mFeverBarAnim.SetPalette(1)}s_mFeverBarAnim.Render()}else{s_ASpriteArray[DATA.SPRITE_DATA_UI].PaintFrame(g,UI.FRAME_LIFE_BAR_GAUGE_BLUE,coinBarX,coinBarY,0)}SetClip(0,0,GLLibConfiguration.screenWidth,GLLibConfiguration.screenHeight);s_ASpriteArray[DATA.SPRITE_DATA_UI].SetCurrentPalette(0);s_ASpriteArray[DATA.SPRITE_DATA_UI].PaintFrame(g,UI.FRAME_MULTIPLIER_BG,multiplierX,multiplierY,0);if(s_isFeverMode){s_game_feverFlameAnimPlayer.Render()}game_PaintPowerupIcon()}if(R==GUI_MESSAGE_INPUT_EVENT){switch(Q){case GameData.k_Menu_Ingame_btnPause:s_isGamePaused=true;guiMgr_ActivateGUILayer(GUI_LAYER.MENU_INGAME,false);guiMgr_ActivateGUILayer(GUI_LAYER.IGM_TOP,true);playSound(SOUND_TYPE.SELECT_SFX,false);break;case GameData.k_Menu_Ingame_BtnShowCheats:if(guiMgr_GetLayerActiveState(GUI_LAYER.CHEATS)){guiMgr_ActivateGUILayer(GUI_LAYER.CHEATS,false)}else{guiMgr_ActivateGUILayer(GUI_LAYER.CHEATS,true)}break;case GameData.k_Menu_Ingame_Btn_fever:if(s_player.m_iCurrentState==cActor.ENTITY_STATE_IDLE){if(game_IsCoinBarFull()){game_SetFeverMode(true)}}break}}}function N(){switch(s_Menu_IngameState){case IMenu_Ingame.STATE_START:f();break;case IMenu_Ingame.STATE_MIDDLE:o();break;case IMenu_Ingame.STATE_END:break}}function f(){s_frameCounter++;if(s_frameCounter>=IMenu_Ingame.TIME_START){J(IMenu_Ingame.STATE_MIDDLE)}else{}}function o(){s_frameCounter++;if(s_frameCounter>=IMenu_Ingame.TIME_MIDDLE){J(IMenu_Ingame.STATE_END)}}function F(){}function a(){s_frameCounter=0}function E(){}function J(O){switch(O){case IMenu_Ingame.STATE_START:F();break;case IMenu_Ingame.STATE_MIDDLE:a();break;case IMenu_Ingame.STATE_END:E();break}s_Menu_IngameState=O}_register_gui_message(GameData.k_gameIGM_Top,A);function A(Q,P){if(Q==GUI_MESSAGE_INITIALIZE){n();guiMgr_ActivateGUILayer(GUI_LAYER.MENU_INGAME,false);gui_ResetAllLayerButtonsPressedState();guiMgr_ActivateGUILayer(GUI_LAYER.EXPLOITS_SUBMENU,true);guiMgr_SetLayerInputBlockState(GUI_LAYER.IGM_TOP,true);y(s.STATE_START);SetTextAreaString(GameData.k_gameIGM_Top,GameData.k_IGM_Top_Txt_scoreValue,""+text_GetFormatNumber(DecodeInt(s_game_score)));SetTextAreaString(GameData.k_gameIGM_Top,GameData.k_IGM_Top_Txt_distanceValue,""+text_GetFormatNumber(LowAPI.Float2Int(DecodeInt(s_game_distance)/1000))+" M");var O=Text_FormatNumber(DecodeInt(s_game_coins_fake));SetTextAreaString(GameData.k_gameIGM_Top,GameData.k_IGM_Top_Txt_coinsValue,O);SetButtonVisibility(GameData.k_gameIGM_Top,GameData.k_IGM_Top_btnCustomerCare,!false);SetButtonVisibility(GameData.k_gameIGM_Top,GameData.k_IGM_Top_btnMoreGames,false);SetButtonVisibility(GameData.k_gameIGM_Top,GameData.k_IGM_Top_btnAddCoins,false);s_iContinueCountdownTimeLeft=((CONTINUE_COUNTDOWN_STARTING_DIGIT+1)*CONTINUE_COUNTDOWN_TIME_PER_DIGIT)-1;Achievements_SaveAchievements();GameVars_SaveAll()}if(Q==GUI_MESSAGE_UPDATE){c();gui_UpdateGameLayerAnims(GameData.k_gameIGM_Top)}if(Q==GUI_MESSAGE_CLOSE){guiMgr_ActivateGUILayer(GUI_LAYER.EXPLOITS_SUBMENU,false)}if(Q==GUI_MESSAGE_BEFORE_PAINT){if(B!=s.STATE_START){s_guiMgr_bAllowLayerPaintAfterPrePaint=false;guiMgr_ActivateGUILayer(GUI_LAYER.EXPLOITS_SUBMENU,false)}}if(Q==GUI_MESSAGE_AFTER_PAINT){if(B==s.STATE_COUNTDOWN){s_ASpriteArray[DATA.SPRITE_DATA_BIG_NUMBER].PaintFrameScaled(g,BIG_NUMBER.FRAME_0+h,GetParamValue(GameData.k_gameIGM_Top,GameData.k_IGM_Top_Gfx_Countdown,GtsData.GUI_POSX),GetParamValue(GameData.k_gameIGM_Top,GameData.k_IGM_Top_Gfx_Countdown,GtsData.GUI_POSY),0,LowAPI.Float2Int(100-(u*100/s.TIME_COUNT)));SetButtonVisibility(GameData.k_gameIGM_Top,GameData.k_IGM_Top_btnPause,true)}if(B!=s.STATE_START){PaintButton(g,GameData.k_gameIGM_Top,GameData.k_IGM_Top_btnPause,0,0)}}if(Q==GUI_MESSAGE_INPUT_EVENT){if(B==s.STATE_COUNTDOWN){switch(P){case GameData.k_IGM_Top_btnPause:s_isGamePaused=true;guiMgr_ActivateGUILayer(GUI_LAYER.IGM_TOP,true);playSound(SOUND_TYPE.SELECT_SFX,false);break}}else{switch(P){case GameData.k_IGM_Top_btnAddCoins:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,"GameState_GAMEPLAY_IGM.js/ k_gameIGM_Top/ AddCoins / Not implemented yet!");break;case GameData.k_IGM_Top_btnOptions:guiMgr_ActivateGUILayer(GUI_LAYER.EXPLOITS_SUBMENU,false);guiMgr_ActivateGUILayer(GUI_LAYER.IGM_OPTIONS_POPUP,true);playSound(SOUND_TYPE.SELECT_SFX,false);break;case GameData.k_IGM_Top_btnResume:if(guiMgr_GetLayerActiveState(GUI_LAYER.CONTINUE)){y(s.STATE_START)}guiMgr_ActivateGUILayer(GUI_LAYER.MENU_INGAME,true);if(!s_game_isTutorialAvailable){}if(s_isGameInContinueCountdown){y(s.STATE_END)}else{y(s.STATE_COUNTDOWN)}playSound(SOUND_TYPE.SELECT_SFX,false);break;case GameData.k_IGM_Top_btnExit:msgBox_AddMsgBox(MSGBOX_TYPE.YES_NO,getString(TEXT.MAIN_TEXT_BACKTOMAIN,IDefine.INDEX_MAIN),MSGBOX_CALLBACK.BACK_TO_MAIN,getString(TEXT.MAIN_TITLE_WARN));playSound(SOUND_TYPE.SELECT_SFX,false);break;case GameData.k_IGM_Top_btnMoreGames:playSound(SOUND_TYPE.SELECT_SFX,false);var R="";if(window.location.toString().split("?").length>1){R=window.location.toString().split("?")[1]}window.open("/?"+R,"_self");break;case GameData.k_IGM_Top_btnCustomerCare:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,"GameState_GAMEPLAY_IGM.js/ CustomerCare / Not implemented yet!");break}}}}d._pressed=false;_register_gui_message(GameData.k_gameContinue,d);function d(R,O){if(R==GUI_MESSAGE_INITIALIZE){StopAllSound();resetSound(0);gui_ResetAllLayerButtonsPressedState();guiMgr_SetLayerInputBlockState(guiMgr_GetGUILayerIndex(guiMgr_iCurrentLayerType),true);guiMgr_SetLayerPaintBlockState(guiMgr_GetGUILayerIndex(guiMgr_iCurrentLayerType),true);s_iContinueCountdownTimeLeft=((CONTINUE_COUNTDOWN_STARTING_DIGIT+1)*CONTINUE_COUNTDOWN_TIME_PER_DIGIT)-1;var T=game_GetContinueCost();SetButtonText(GameData.k_gameContinue,GameData.k_Continue_btnPaytoContinue,""+text_GetFormatNumber(T));SetTextAreaString(GameData.k_gameContinue,GameData.k_Continue_TxtCoinsTotal,""+text_GetFormatNumber(s_systemCoins));if(s_game_characterIndex>0){SetParamValue(GameData.k_gameContinue,GameData.k_Continue_gfx_guy,GtsData.GUI_GRAPHITEM_SPRITEID,DATA.SPRITE_DATA_RUNNING_CHA01+(s_game_characterIndex-1));SetParamValue(GameData.k_gameContinue,GameData.k_Continue_gfx_guy,GtsData.GUI_GRAPHITEM_ANIMID,0)}if(s_game_characterIndex==2){if(!s_game_use_character_2){SetTextAreaVisibility(GameData.k_gameContinue,GameData.k_Continue_TxtTitle,false);SetButtonText(GameData.k_gameContinue,GameData.k_Continue_btnContinue,"Free Rivive")}}if(s_game_ankh_bonus){SetButtonText(GameData.k_gameContinue,GameData.k_Continue_btnContinue,"Use Ankh");SetTextAreaVisibility(GameData.k_gameContinue,GameData.k_Continue_TxtTitle,false)}if(false&&s_bFriendRecordsDownloaded){var P=GetPosInFriendRanking();var S=false;var U=null;if((P==0)&&((s_zFriendRecordCredentials[0].equals(oss_MyFacebookCredential())))){S=true;var W=s_iFriendRecordScore[P]-DecodeInt(s_game_score);s_aArgumentStringArr[0]=""+W;U=getFormattedString(getString(TEXT.MAIN_DIST_ONLYMORE_HIGHSCORE),s_aArgumentStringArr,"#")}else{if(P<MAX_FRIEND_RECORDS){var W=s_iFriendRecordScore[P]-DecodeInt(s_game_score);if(W>0){S=true;s_aArgumentStringArr[0]=""+W;var V=s_zFriendRecordName[P];if(V.length()>20){V=V.substring(0,20)+"..."}s_aArgumentStringArr[1]=V;U=getFormattedString(getString(TEXT.MAIN_DIST_ONLYMORE_FRIEND),s_aArgumentStringArr,"#")}}else{}}if(S){SetGraphItemVisibility(GameData.k_gameContinue,GameData.k_Continue_gfx_IncentiveBG,true);SetTextAreaVisibility(GameData.k_gameContinue,GameData.k_Continue_txt_Incentive,true);SetTextAreaString(GameData.k_gameContinue,GameData.k_Continue_txt_Incentive,U)}}if(s_game_is_ads_revive&&s_game_distance_revive<100000){game_EndGame()}}if(R==GUI_MESSAGE_UPDATE){if(s_isGamePaused){return}var Y=LowAPI.Float2Int(s_iContinueCountdownTimeLeft/CONTINUE_COUNTDOWN_TIME_PER_DIGIT);s_iContinueCountdownTimeLeft-=s_game_frameDT;if(s_iContinueCountdownTimeLeft<0){s_iContinueCountdownTimeLeft=0;game_EndContinueCountdown(false)}var aa=LowAPI.Float2Int(s_iContinueCountdownTimeLeft/CONTINUE_COUNTDOWN_TIME_PER_DIGIT);SetParamValue(GameData.k_gameContinue,GameData.k_Continue_Gfx_Countdown,GtsData.GUI_GRAPHITEM_FRAMEID,BIG_NUMBER.FRAME_0+aa);gui_UpdateGameLayerAnims(GameData.k_gameContinue)}if(R==GUI_MESSAGE_CLOSE){s_isGameInContinueCountdown=false}if(R==GUI_MESSAGE_BEFORE_PAINT){}if(R==GUI_MESSAGE_AFTER_PAINT){}if(R==GUI_MESSAGE_INPUT_EVENT){if(O==GameData.k_Continue_btnPause){s_isGamePaused=true;guiMgr_ActivateGUILayer(GUI_LAYER.IGM_TOP,true);playSound(SOUND_TYPE.SELECT_SFX,false)}else{if(O==GameData.k_Continue_btnContinue){if(s_game_ankh_bonus){s_game_ankh_bonus=false;game_EndContinueCountdown(true);s_iCurrentRunContinues++;GameVars_SaveAll();CurrentExploits_SetExploitValue(IExploit.EX_T_CONTINUE,LowAPI.Float2Int((DecodeInt(s_game_distance)/1000)));Achievements_SetAchievementValue(IExploit.EX_T_CONTINUE,LowAPI.Float2Int((DecodeInt(s_game_distance)/1000)));G()}else{if(s_game_characterIndex==2&&!s_game_use_character_2){s_game_use_character_2=true;game_EndContinueCountdown(true);s_iCurrentRunContinues++;GameVars_SaveAll();CurrentExploits_SetExploitValue(IExploit.EX_T_CONTINUE,LowAPI.Float2Int((DecodeInt(s_game_distance)/1000)));Achievements_SetAchievementValue(IExploit.EX_T_CONTINUE,LowAPI.Float2Int((DecodeInt(s_game_distance)/1000)));G()}else{game_EndGame()}}}else{if(O==GameData.k_Continue_btnPaytoContinue){var X=true;var T=game_GetContinueCost();if(X&&DecodeInt(s_systemCoins)<T){s_iContinueCountdownTimeLeft=((CONTINUE_COUNTDOWN_STARTING_DIGIT+1)*CONTINUE_COUNTDOWN_TIME_PER_DIGIT)-1;upgrades_ShowNotEnough(IAPMGR_COINS,T)}else{numberOfRetry++;var Z={event:"gameButton",buttonName:"retry",eventData:numberOfRetry,productKey:"dangerDashFree",};CHASE__removeAllMonsters();s_isGamePaused=true;dataLayer.push({event:"ga_event",ga_category:"Gamepage",ga_action:"Completion",ga_label:window.productTitle,ga_noninteraction:false});playAds();var Q=setInterval(function(){if(isAdsComplete()){game_EndContinueCountdown(true);s_iCurrentRunContinues++;s_systemCoins=EncodeInt(DecodeInt(s_systemCoins)-T);GameVars_SetRecordValue(RMS_RECORD_CURRENT_COINS,s_systemCoins,false);GameVars_SaveAll();CurrentExploits_SetExploitValue(IExploit.EX_T_CONTINUE,LowAPI.Float2Int((DecodeInt(s_game_distance)/1000)));Achievements_SetAchievementValue(IExploit.EX_T_CONTINUE,LowAPI.Float2Int((DecodeInt(s_game_distance)/1000)));G();clearInterval(Q);dataLayer.push({event:"ga_event",ga_category:"Gamepage",ga_action:"Start",ga_label:window.productTitle,ga_noninteraction:false});guiMgr_ActivateGUILayer(GUI_LAYER.MENU_INGAME,false);guiMgr_ActivateGUILayer(GUI_LAYER.IGM_TOP,true);guiMgr_ActivateGUILayer(GUI_LAYER.MENU_INGAME,true);y(s.STATE_COUNTDOWN)}},100)}}else{if(Input_CheckState_SYNC(INPUT_FLAG_RELEASED)){var aa=LowAPI.Float2Int(s_iContinueCountdownTimeLeft/CONTINUE_COUNTDOWN_TIME_PER_DIGIT);if(aa==0){s_iContinueCountdownTimeLeft=-1}else{s_iContinueCountdownTimeLeft=(aa*CONTINUE_COUNTDOWN_TIME_PER_DIGIT)-1}}}}}}}var h=0;var u=0;var s={};s.STATE_START=0;s.STATE_COUNTDOWN=1;s.STATE_END=2;s.TIME_COUNT=1000;var B=-1;function c(){switch(B){case s.STATE_START:z();break;case s.STATE_COUNTDOWN:t();break;case s.STATE_END:x();break}}function z(){}function t(){u-=s_game_frameDT;if(u<=0){h--;playSound(SOUND_TYPE.COUNTDOWN_SFX,false);u+=s.TIME_COUNT;SetParamValue(GameData.k_gameIGM_Top,GameData.k_IGM_Top_Gfx_Countdown,GtsData.GUI_GRAPHITEM_FRAMEID,BIG_NUMBER.FRAME_0+h);if(h<=0){G();y(s.STATE_END)}}}function x(){s_isGamePaused=false;guiMgr_ActivateGUILayer(GUI_LAYER.IGM_TOP,false)}function p(){}function l(){h=3;u=s.TIME_COUNT;SetParamValue(GameData.k_gamePause,GameData.k_Pause_Gfx_Countdown,GtsData.GUI_GRAPHITEM_FRAMEID,BIG_NUMBER.FRAME_0+h);guiMgr_SetLayerInputBlockState(guiMgr_GetGUILayerIndex(guiMgr_iCurrentLayerType),false);guiMgr_SetLayerPaintBlockState(guiMgr_GetGUILayerIndex(guiMgr_iCurrentLayerType),false)}function i(){}function y(O){switch(O){case s.STATE_START:p();break;case s.STATE_COUNTDOWN:l();break;case s.STATE_END:i();break}B=O}function n(){StopSound(SOUND_MODE.MUSIC);if(s_ambientChannel!=-1){StopSoundChannel(s_ambientChannel);if(s_isFeverMode){StopSoundChannel(s_feverLoopChannel)}if(s_game_goldRushDt>0){StopSoundChannel(s_goldRushChannel)}}}function G(){playSound(SOUND_TYPE.GAMEPLAY_MUSIC,true);s_ambientChannel=playSound(s_ambientSound[s_iCurrentEnvironment],true);if(s_isFeverMode){s_feverLoopChannel=playSound(SOUND_TYPE.FEVER_LOOP_SFX,true)}if(s_game_goldRushDt>0){s_goldRushChannel=playSound(SOUND_TYPE.GOLD_RUSH_SFX,true)}}_register_gui_message(GameData.k_gameResults_Top,w);function w(Q,P){if(Q==GUI_MESSAGE_INITIALIZE){gui_ResetAllLayerButtonsPressedState();updateCurrencyHUD();s_showCantGoBack=false;s_showCantGoBack_Time=0;SetTextAreaString(GameData.k_gameResults_Top,GameData.k_Results_Top_Txt_scoreValue,""+text_GetFormatNumber(DecodeInt(s_game_score)));SetTextAreaString(GameData.k_gameResults_Top,GameData.k_Results_Top_Txt_distanceValue,""+text_GetFormatNumber(LowAPI.Float2Int(DecodeInt(s_game_distance)/1000))+" M");var T=GameState.getCurrentState();if(T.ID==GameState_RESULTITEMSUGGESTION.ID){SetButtonVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_btnFacebook,false);SetButtonVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_btnNext,false);SetButtonVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_btnNewRun,true)}if(T.ID==GameState_RESULTEXPLOITS2.ID){var O=Text_FormatNumber(DecodeInt(s_game_coins_fake));SetTextAreaString(GameData.k_gameResults_Top,GameData.k_Results_Top_Txt_coinsValue,O)}else{SetTextAreaVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_Txt_coinsValue,false);SetTextAreaVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_Txt_coins,false);SetTextAreaVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_Txt_distanceValue,false);SetTextAreaVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_Txt_distance,false);SetGraphItemVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_Gfx_coins,false);var S=true;S=S&&(s_fb_last_shared_score!=DecodeInt(s_game_score));if(Device.isWindowsPhone){S=false}SetButtonVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_BtnFacebook_Share,S)}SetButtonVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_btnAddCoins,false);SetTextAreaVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_txtTitle,false)}if(Q==GUI_MESSAGE_UPDATE){c();gui_UpdateGameLayerAnims(GameData.k_gameResults_Top)}if(Q==GUI_MESSAGE_CLOSE){s_showCantGoBack=false;s_showCantGoBack_Time=0;guiMgr_ActivateGUILayer(GUI_LAYER.EXPLOITS_SUBMENU,false)}if(Q==GUI_MESSAGE_AFTER_PAINT){if(s_showCantGoBack){SetTextAreaVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_txt_CantGoBack,((System.currentTimeMillis()&(1<<9))!=0));s_showCantGoBack_Time+=s_game_frameDT;if(s_showCantGoBack_Time>MAX_CANTGOBACK_TIME){s_showCantGoBack=false;s_showCantGoBack_Time=0;SetTextAreaVisibility(GameData.k_gameResults_Top,GameData.k_Results_Top_txt_CantGoBack,false)}}}if(Q==GUI_MESSAGE_INPUT_EVENT){switch(P){case GameData.k_Results_Top_btnAddCoins:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,"GameState_GAMEPLAY_IGM.js/ k_gameResults_Top/ AddCoins / Not implemented yet!");break;case GameData.k_Results_Top_btnNext:dataLayer.push({event:"ga_event",ga_category:"Gamepage",ga_action:"Start",ga_label:window.productTitle,ga_noninteraction:false});StopAllSound();if(typeof gdsdk!=="undefined"&&gdsdk.showAd!=="undefined"){window.s_game_isPaused=!false;window.addEventListener("SDK_GAME_START",function(U){window.s_game_isPaused=false;s_didPlayTigersSound=false;guiMgr_ActivateGUILayer(GUI_LAYER.RESULTSCREEN,false);guiMgr_ActivateGUILayer(GUI_LAYER.RESULTS_TOP,!true);guiMgr_ActivateGUILayer(GUI_LAYER.EXPLOITS_SUBMENU,!true);GameState.scheduleSwitchState(GameState_GAMEPLAY.ID,true,true)});gdsdk.showAd()}else{s_didPlayTigersSound=false;guiMgr_ActivateGUILayer(GUI_LAYER.RESULTSCREEN,false);guiMgr_ActivateGUILayer(GUI_LAYER.RESULTS_TOP,!true);guiMgr_ActivateGUILayer(GUI_LAYER.EXPLOITS_SUBMENU,!true);GameState.scheduleSwitchState(GameState_GAMEPLAY.ID,true,true)}playSound(SOUND_TYPE.SELECT_SFX,false);break;case GameData.k_Results_Top_btnNewRun:StopAllSound();s_isShowAdNewRun=false;s_isGamePaused=true;dataLayer.push({event:"ga_event",ga_category:"Gamepage",ga_action:"Completion",ga_label:window.productTitle,ga_noninteraction:false});playAds();var R=setInterval(function(){if(isAdsComplete()){s_didPlayTigersSound=false;GameState.scheduleSwitchState(GameState_GAMEPLAY.ID,true,true);guiMgr_ActivateGUILayer(GUI_LAYER.RESULTSCREEN,false);playSound(SOUND_TYPE.SELECT_SFX,false);clearInterval(R);dataLayer.push({event:"ga_event",ga_category:"Gamepage",ga_action:"Start",ga_label:window.productTitle,ga_noninteraction:false});s_isGamePaused=!true}},100);break;case GameData.k_Results_Top_btnExit:if(typeof gdsdk!=="undefined"&&gdsdk.showAd!=="undefined"){window.s_game_isPaused=!false;window.addEventListener("SDK_GAME_START",function(U){window.s_game_isPaused=false;GloftJDMP.s_game.handleMessage(GameState.MESSAGE_NAV_HOME)});gdsdk.showAd()}else{GloftJDMP.s_game.handleMessage(GameState.MESSAGE_NAV_HOME)}break;case GameData.k_Results_Top_btnUpgrades:GloftJDMP.s_game.handleMessage(GameState.MESSAGE_NAV_SHOP);break;case GameData.k_Results_Top_btnFacebook:case GameData.k_Results_Top_BtnFacebook_Share:playSound(SOUND_TYPE.SELECT_SFX,false);SetButtonEnabled(GameData.k_gameResults_Top,GameData.k_Results_Top_BtnFacebook_Share,false);fbm_Reset();fbm_Share();break}}}_register_gui_message(GameData.k_gameCheat,C);function C(P,O){if(P==GUI_MESSAGE_INITIALIZE){SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCircuit_Up,"+");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnMission_Up,"+");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnPhase_Up,"+");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnEnv_Up,"+");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCircuit_Down,"-");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnMission_Down,"-");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnPhase_Down,"-");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnEnv_Down,"-");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCheat_EnableTrackControl,"Track Section\ncontrol");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCheat_EnablePhaseControl,"Level\ncontrol");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCheat_EnableEnvControl,"Env\ncontrol");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnProfileOn,"Do\nProfile");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnShowProfileOn,"Show\nProfile");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnSimpleRoadOn,"Simple\nroad");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnStopPlayer,"Stop\nPlayer");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnDrawTextures,"Draw\nTxturs");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnDrawPolys,"Draw\nPolys");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnDrawGUI,"Reset\nProfile");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnDrawBG,"Advance\nSegment");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnDrawAll,"Draw\nAll");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnObjectLOD,"Android\noptim");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCheat1,"Do\nAnims");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCheat2,"Use\nFog");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCheat3,"Ghost");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCheat4,"Round");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCheat5,"DATA");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCheat6,"TIGER");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_BtnCheat7,"Only\nFog")}if(P==GUI_MESSAGE_INPUT_EVENT){switch(O){case GameData.k_Cheat_BtnCheat_EnableTrackControl:s_bTrackControlCheatsActivated=!s_bTrackControlCheatsActivated;break;case GameData.k_Cheat_BtnCheat_EnablePhaseControl:s_bLevelControlCheatsActivated=!s_bLevelControlCheatsActivated;break;case GameData.k_Cheat_BtnCheat_EnableEnvControl:s_bEnvControlCheatsActivated=!s_bEnvControlCheatsActivated;break;case GameData.k_Cheat_BtnCircuit_Up:s_iCheatTrackControl_TrackSection++;if(s_iCheatTrackControl_TrackSection>=s_numTrackSections){s_iCheatTrackControl_TrackSection=s_numTrackSections-1}break;case GameData.k_Cheat_BtnCircuit_Down:s_iCheatTrackControl_TrackSection--;if(s_iCheatTrackControl_TrackSection<0){s_iCheatTrackControl_TrackSection=0}break;case GameData.k_Cheat_BtnMission_Up:s_iCheatTrackControl_Mission++;if(s_iCheatTrackControl_Mission>=s_numMissions){s_iCheatTrackControl_Mission=s_numMissions-1}break;case GameData.k_Cheat_BtnMission_Down:s_iCheatTrackControl_Mission--;if(s_iCheatTrackControl_Mission<0){s_iCheatTrackControl_Mission=0}break;case GameData.k_Cheat_BtnPhase_Up:s_iCheatLevelControl_Level++;if(s_iCheatLevelControl_Level>=s_numTrackLevels){s_iCheatLevelControl_Level=s_numTrackLevels-1}break;case GameData.k_Cheat_BtnPhase_Down:s_iCheatLevelControl_Level--;if(s_iCheatLevelControl_Level<0){s_iCheatLevelControl_Level=0}break;case GameData.k_Cheat_BtnEnv_Up:s_iCheatTrackControl_Env++;if(s_iCheatTrackControl_Env>=NUM_ENVIRONMENTS){s_iCheatTrackControl_Env=NUM_ENVIRONMENTS-1}break;case GameData.k_Cheat_BtnEnv_Down:s_iCheatTrackControl_Env--;if(s_iCheatTrackControl_Env<0){s_iCheatTrackControl_Env=0}break;case GameData.k_Cheat_BtnProfileOn:s_debug_bSwitchEnableProfile=!s_debug_bSwitchEnableProfile;break;case GameData.k_Cheat_BtnShowProfileOn:s_debug_bSwitchShowProfileResults=!s_debug_bSwitchShowProfileResults;break;case GameData.k_Cheat_BtnSimpleRoadOn:s_debug_bSwitchDrawSmoothRoad=!s_debug_bSwitchDrawSmoothRoad;break;case GameData.k_Cheat_BtnStopPlayer:s_debug_bSwitchStopPlayer=!s_debug_bSwitchStopPlayer;break;case GameData.k_Cheat_BtnDrawTextures:s_debug_bSwitchDrawTextures=!s_debug_bSwitchDrawTextures;break;case GameData.k_Cheat_BtnDrawPolys:s_debug_bSwitchDrawPolys=!s_debug_bSwitchDrawPolys;break;case GameData.k_Cheat_BtnDrawGUI:debug_profileStopRecording();Time_Profiler_Clean();debug_profileInit();debug_profileStartRecording();s_fps=0;s_fpsCountTime=0;s_fpsCount=0;break;case GameData.k_Cheat_BtnDrawBG:s_player._segYOn=0;s_player._segOn++;if(s_player._segOn>=s_mainTrackNbSegment){s_player._segOn=0}break;case GameData.k_Cheat_BtnDrawAll:s_debug_bSwitchDoPaint=!s_debug_bSwitchDoPaint;s_debug_bSwitchDoUpdate=!s_debug_bSwitchDoUpdate;break;case GameData.k_Cheat_BtnObjectLOD:break;case GameData.k_Cheat_BtnCheat1:s_debug_bSwitchUseTextureAnimations=!s_debug_bSwitchUseTextureAnimations;break;case GameData.k_Cheat_BtnCheat2:s_debug_bSwitchUseF3DFog=!s_debug_bSwitchUseF3DFog;break;case GameData.k_Cheat_BtnCheat3:s_debug_bSwitchInmortal=!s_debug_bSwitchInmortal;break;case GameData.k_Cheat_BtnCheat4:s_debug_bSwitchRoundRoad=!s_debug_bSwitchRoundRoad;break;case GameData.k_Cheat_BtnCheat5:s_bDebugDataCheatsActivated=!s_bDebugDataCheatsActivated;guiMgr_ActivateGUILayer(GUI_LAYER.CHEATS2,s_bDebugDataCheatsActivated);break;case GameData.k_Cheat_BtnCheat6:if(!s_isRidingTiger){game_GetTiger()}else{game_LoseTiger()}break;case GameData.k_Cheat_BtnCheat7:s_debug_bSwitchFogOnly=!s_debug_bSwitchFogOnly;break}}if(P==GUI_MESSAGE_BEFORE_PAINT){}if(P==GUI_MESSAGE_UPDATE){j()}}function j(){SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_Text_Cheat_TrackControl_Activated,s_bTrackControlCheatsActivated?"ENABLED":"disabled");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_Text_Cheat_PhaseControl_Activated,s_bLevelControlCheatsActivated?"ENABLED":"disabled");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_Text_Cheat_EnvControl_Activated,s_bEnvControlCheatsActivated?"ENABLED":"disabled");SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_Text_Cheat_Circuit,"SubTrack:"+s_iCheatTrackControl_TrackSection+"/"+s_numTrackSections);SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_Text_Cheat_Mission,"Mission:"+s_iCheatTrackControl_Mission+"/"+s_numMissions);SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_Text_Phase,"Level:"+s_iCheatLevelControl_Level+"/"+s_numTrackLevels);SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_Text_Cheat_NumTextures,""+s_debug_iNumDrawTextures);SetTextAreaString(GameData.k_gameCheat,GameData.k_Cheat_Text_Cheat_NumPolys,""+s_debug_iNumDrawPolys)}var r=300;_register_gui_message(GameData.k_gameBuyLife_One,L);function L(Q,P){if(Q==GUI_MESSAGE_INITIALIZE){SetTextAreaString(GameData.k_gameBuyLife_One,GameData.k_BuyLife_One_txt_price,""+text_GetFormatNumber(s_arrayTweaks[ITweaks.SCORE_BOOSTER_COST][0]))}if(Q==GUI_MESSAGE_INPUT_EVENT){switch(P){case GameData.k_BuyLife_One_BtnBuy:if(guiMgr_GetGUILayerState(GUI_LAYER.BUYLIFE_ONE)==GUI_STATE_IDLE){game_buyScoreBooster();s_game_scoreMultiplier_Base=EncodeInt(s_arrayTweaks[ITweaks.INITIAL_SCORE_MULTIPLAYER][0]+s_arrayTweaks[ITweaks.SCORE_BOOSTER_MULTIPLIER_INCREASE][0]+s_playerTitle);if(s_game_characterIndex==1){var O=DecodeInt(s_game_scoreMultiplier_Base);O+=s_arrayTweaks[ITweaks.CHARACTER_01_BONUS][0];s_game_scoreMultiplier_Base=EncodeInt(O)}if(s_upgradeLevel[IUpgrade.MULTIPLIER]>-1){var O=DecodeInt(s_game_scoreMultiplier_Base);O+=s_arrayUpgrades[IUpgrade.MULTIPLIER][s_upgradeLevel[IUpgrade.MULTIPLIER]][IUpgrade.VALUE];s_game_scoreMultiplier_Base=EncodeInt(O)}SetButtonEnabled(GameData.k_gameBuyLife_One,GameData.k_BuyLife_One_BtnBuy,false);q()}break}}if(Q==GUI_MESSAGE_AFTER_PAINT){s_bBuyLifeFrameProcessed=false}if(Q==GUI_MESSAGE_INTRO){guiMgr_SetGUILayerState(GUI_LAYER.BUYLIFE_ONE,GUI_STATE_INTRO);guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_ONE][GUILAYER_DATA_GLOBALOFFSETX]=-r}if(Q==GUI_MESSAGE_OUTRO){guiMgr_SetGUILayerState(GUI_LAYER.BUYLIFE_ONE,GUI_STATE_OUTRO);guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_ONE][GUILAYER_DATA_GLOBALOFFSETX]=-1}if(Q==GUI_MESSAGE_UPDATE){if(s_isGamePaused||s_isGameInContinueCountdown){return}var R=guiMgr_GetGUILayerState(GUI_LAYER.BUYLIFE_ONE);switch(R){case GUI_STATE_INTRO:guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_ONE][GUILAYER_DATA_GLOBALOFFSETX]=(guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_ONE][GUILAYER_DATA_GLOBALOFFSETX]/2)|0;if(guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_ONE][GUILAYER_DATA_GLOBALOFFSETX]==0){guiMgr_SetGUILayerState(GUI_LAYER.BUYLIFE_ONE,GUI_STATE_IDLE)}break;case GUI_STATE_OUTRO:guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_ONE][GUILAYER_DATA_GLOBALOFFSETX]*=2;if(guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_ONE][GUILAYER_DATA_GLOBALOFFSETX]<=-r){guiMgr_ActivateGUILayer(GUI_LAYER.BUYLIFE_ONE,false,false);if(!showHeadstartOptionsIfPossible()){introState_setState(GAME_INTROSTATE_INTRO_OVER)}}break;case GUI_STATE_IDLE:if(!s_bBuyLifeFrameProcessed){s_iBuyLifeGUITime-=s_game_frameDT;if(s_iBuyLifeGUITime<=0){q()}s_bBuyLifeFrameProcessed=true}break}}}function q(){if(guiMgr_GetLayerActiveState(GUI_LAYER.BUYLIFE_ONE)){SetButtonEnabled(GameData.k_gameBuyLife_One,GameData.k_BuyLife_One_BtnBuy,false);guiMgr_ActivateGUILayer(GUI_LAYER.BUYLIFE_ONE,false,true)}if(guiMgr_GetLayerActiveState(GUI_LAYER.BUYLIFE_MANY)){SetButtonEnabled(GameData.k_gameBuyLife_Many,GameData.k_BuyLife_Many_BtnBuy,false);guiMgr_ActivateGUILayer(GUI_LAYER.BUYLIFE_MANY,false,true)}}var K=300;_register_gui_message(GameData.k_gameBuyLife_Many,e);function e(Q,P){if(Q==GUI_MESSAGE_INITIALIZE){SetTextAreaString(GameData.k_gameBuyLife_Many,GameData.k_BuyLife_Many_txt_price,""+text_GetFormatNumber(s_arrayTweaks[ITweaks.SCORE_MEGABOOSTER_COST][0]))}if(Q==GUI_MESSAGE_INPUT_EVENT){switch(P){case GameData.k_BuyLife_Many_BtnBuy:if(guiMgr_GetGUILayerState(GUI_LAYER.BUYLIFE_MANY)==GUI_STATE_IDLE){game_buyScoreMegaBooster();s_game_scoreMultiplier_Base=EncodeInt(s_arrayTweaks[ITweaks.INITIAL_SCORE_MULTIPLAYER][0]+s_arrayTweaks[ITweaks.SCORE_MEGABOOSTER_MULTIPLIER_INCREASE][0]+s_playerTitle);if(s_game_characterIndex==1){var O=DecodeInt(s_game_scoreMultiplier_Base);O+=s_arrayTweaks[ITweaks.CHARACTER_01_BONUS][0];s_game_scoreMultiplier_Base=EncodeInt(O)}if(s_upgradeLevel[IUpgrade.MULTIPLIER]>-1){var O=DecodeInt(s_game_scoreMultiplier_Base);O+=s_arrayUpgrades[IUpgrade.MULTIPLIER][s_upgradeLevel[IUpgrade.MULTIPLIER]][IUpgrade.VALUE];s_game_scoreMultiplier_Base=EncodeInt(O)}SetButtonEnabled(GameData.k_gameBuyLife_Many,GameData.k_BuyLife_Many_BtnBuy,false);q()}break}}if(Q==GUI_MESSAGE_AFTER_PAINT){s_bBuyLifeFrameProcessed=false}if(Q==GUI_MESSAGE_INTRO){guiMgr_SetGUILayerState(GUI_LAYER.BUYLIFE_MANY,GUI_STATE_INTRO);guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_MANY][GUILAYER_DATA_GLOBALOFFSETX]=K}if(Q==GUI_MESSAGE_OUTRO){guiMgr_SetGUILayerState(GUI_LAYER.BUYLIFE_MANY,GUI_STATE_OUTRO);guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_MANY][GUILAYER_DATA_GLOBALOFFSETX]=1}if(Q==GUI_MESSAGE_UPDATE){if(s_isGamePaused||s_isGameInContinueCountdown){return}var R=guiMgr_GetGUILayerState(GUI_LAYER.BUYLIFE_MANY);switch(R){case GUI_STATE_INTRO:guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_MANY][GUILAYER_DATA_GLOBALOFFSETX]=(guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_MANY][GUILAYER_DATA_GLOBALOFFSETX]/2)|0;if(guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_MANY][GUILAYER_DATA_GLOBALOFFSETX]==0){guiMgr_SetGUILayerState(GUI_LAYER.BUYLIFE_MANY,GUI_STATE_IDLE)}break;case GUI_STATE_OUTRO:guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_MANY][GUILAYER_DATA_GLOBALOFFSETX]*=2;if(guiMgr_layerOffsetData[GUI_LAYER.BUYLIFE_MANY][GUILAYER_DATA_GLOBALOFFSETX]>=K){guiMgr_ActivateGUILayer(GUI_LAYER.BUYLIFE_MANY,false,false);if(!showHeadstartOptionsIfPossible()){introState_setState(GAME_INTROSTATE_INTRO_OVER)}}break;case GUI_STATE_IDLE:if(!s_bBuyLifeFrameProcessed){s_iBuyLifeGUITime-=s_game_frameDT;if(s_iBuyLifeGUITime<=0){q()}s_bBuyLifeFrameProcessed=true}break}}}var b=300;_register_gui_message(GameData.k_gameBuyHeadstart_Small,I);function I(P,O){if(P==GUI_MESSAGE_INITIALIZE){s_aArgumentStringArr[0]=""+text_GetFormatNumber(s_arrayTweaks[ITweaks.HEADSTART_SMALL_DISTANCE][0]);var Q=getFormattedString(getString(TEXT.MAIN_BUY_HEADSTART_SMALL),s_aArgumentStringArr,"#");SetTextAreaString(GameData.k_gameBuyHeadstart_Small,GameData.k_BuyHeadstart_Small_txt_life,Q);SetTextAreaString(GameData.k_gameBuyHeadstart_Small,GameData.k_BuyHeadstart_Small_txt_price,""+text_GetFormatNumber(s_arrayTweaks[ITweaks.HEADSTART_SMALL_COST][0]))}if(P==GUI_MESSAGE_INPUT_EVENT){switch(O){case GameData.k_BuyHeadstart_Small_BtnBuy:if(guiMgr_GetGUILayerState(GUI_LAYER.BUYHEADSTART_SMALL)==GUI_STATE_IDLE){game_buyHeadstart(false);v()}break}}if(P==GUI_MESSAGE_AFTER_PAINT){s_bBuyLifeFrameProcessed=false}if(P==GUI_MESSAGE_INTRO){guiMgr_SetGUILayerState(GUI_LAYER.BUYHEADSTART_SMALL,GUI_STATE_INTRO);guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_SMALL][GUILAYER_DATA_GLOBALOFFSETX]=-b}if(P==GUI_MESSAGE_OUTRO){guiMgr_SetGUILayerState(GUI_LAYER.BUYHEADSTART_SMALL,GUI_STATE_OUTRO);guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_SMALL][GUILAYER_DATA_GLOBALOFFSETX]=-1}if(P==GUI_MESSAGE_UPDATE){if(s_isGamePaused||s_isGameInContinueCountdown){return}var R=guiMgr_GetGUILayerState(GUI_LAYER.BUYHEADSTART_SMALL);switch(R){case GUI_STATE_INTRO:guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_SMALL][GUILAYER_DATA_GLOBALOFFSETX]=(guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_SMALL][GUILAYER_DATA_GLOBALOFFSETX]/2)|0;if(guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_SMALL][GUILAYER_DATA_GLOBALOFFSETX]==0){guiMgr_SetGUILayerState(GUI_LAYER.BUYHEADSTART_SMALL,GUI_STATE_IDLE)}break;case GUI_STATE_OUTRO:guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_SMALL][GUILAYER_DATA_GLOBALOFFSETX]*=2;if(guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_SMALL][GUILAYER_DATA_GLOBALOFFSETX]<=-b){guiMgr_ActivateGUILayer(GUI_LAYER.BUYHEADSTART_SMALL,false,false)}break;case GUI_STATE_IDLE:if(!s_bBuyLifeFrameProcessed){s_iBuyLifeGUITime-=s_game_frameDT;if(s_iBuyLifeGUITime<=0){v();introState_setState(GAME_INTROSTATE_INTRO_OVER)}s_bBuyLifeFrameProcessed=true}break}}}function v(){if(guiMgr_GetLayerActiveState(GUI_LAYER.BUYHEADSTART_SMALL)){SetButtonEnabled(GameData.k_gameBuyHeadstart_Small,GameData.k_BuyHeadstart_Small_BtnBuy,false);guiMgr_ActivateGUILayer(GUI_LAYER.BUYHEADSTART_SMALL,false,true)}if(guiMgr_GetLayerActiveState(GUI_LAYER.BUYHEADSTART_BIG)){SetButtonEnabled(GameData.k_gameBuyHeadstart_Big,GameData.k_BuyHeadstart_Big_BtnBuy,false);guiMgr_ActivateGUILayer(GUI_LAYER.BUYHEADSTART_BIG,false,true)}}var m=300;_register_gui_message(GameData.k_gameBuyHeadstart_Big,D);function D(P,O){if(P==GUI_MESSAGE_INITIALIZE){s_aArgumentStringArr[0]=""+text_GetFormatNumber(s_arrayTweaks[ITweaks.HEADSTART_BIG_DISTANCE][0]);var Q=getFormattedString(getString(TEXT.MAIN_BUY_HEADSTART_BIG),s_aArgumentStringArr,"#");SetTextAreaString(GameData.k_gameBuyHeadstart_Big,GameData.k_BuyHeadstart_Big_txt_lifes,Q);SetTextAreaString(GameData.k_gameBuyHeadstart_Big,GameData.k_BuyHeadstart_Big_txt_price,""+text_GetFormatNumber(s_arrayTweaks[ITweaks.HEADSTART_BIG_COST][0]))}if(P==GUI_MESSAGE_INPUT_EVENT){switch(O){case GameData.k_BuyHeadstart_Big_BtnBuy:if(guiMgr_GetGUILayerState(GUI_LAYER.BUYHEADSTART_BIG)==GUI_STATE_IDLE){game_buyHeadstart(true);v()}break}}if(P==GUI_MESSAGE_AFTER_PAINT){s_bBuyLifeFrameProcessed=false}if(P==GUI_MESSAGE_INTRO){guiMgr_SetGUILayerState(GUI_LAYER.BUYHEADSTART_BIG,GUI_STATE_INTRO);guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_BIG][GUILAYER_DATA_GLOBALOFFSETX]=m}if(P==GUI_MESSAGE_OUTRO){guiMgr_SetGUILayerState(GUI_LAYER.BUYHEADSTART_BIG,GUI_STATE_OUTRO);guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_BIG][GUILAYER_DATA_GLOBALOFFSETX]=1}if(P==GUI_MESSAGE_UPDATE){if(s_isGamePaused||s_isGameInContinueCountdown){return}var R=guiMgr_GetGUILayerState(GUI_LAYER.BUYHEADSTART_BIG);switch(R){case GUI_STATE_INTRO:guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_BIG][GUILAYER_DATA_GLOBALOFFSETX]=(guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_BIG][GUILAYER_DATA_GLOBALOFFSETX]/2)|0;if(guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_BIG][GUILAYER_DATA_GLOBALOFFSETX]==0){guiMgr_SetGUILayerState(GUI_LAYER.BUYHEADSTART_BIG,GUI_STATE_IDLE)}break;case GUI_STATE_OUTRO:guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_BIG][GUILAYER_DATA_GLOBALOFFSETX]*=2;if(guiMgr_layerOffsetData[GUI_LAYER.BUYHEADSTART_BIG][GUILAYER_DATA_GLOBALOFFSETX]>=m){guiMgr_ActivateGUILayer(GUI_LAYER.BUYHEADSTART_BIG,false,false)}break;case GUI_STATE_IDLE:if(!s_bBuyLifeFrameProcessed){s_iBuyLifeGUITime-=s_game_frameDT;if(s_iBuyLifeGUITime<=0){v();introState_setState(GAME_INTROSTATE_INTRO_OVER)}s_bBuyLifeFrameProcessed=true}break}}}LowAPI.extendObject(H,{},true)})(window);