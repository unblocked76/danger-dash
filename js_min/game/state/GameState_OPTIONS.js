(function(a,g){function b(){b.__superclass__.call(this,b.ID,arguments);this.setListenerStateMessage(GameState.MESSAGE_INIT,this.INIT);this.setListenerStateMessage(GameState.MESSAGE_UPDATE,this.UPDATE);this.setListenerStateMessage(GameState.MESSAGE_PAINT,this.PAINT);this.setListenerStateMessage(GameState.MESSAGE_EXIT,this.EXIT)}LowAPI.extendClass(b,GameState);b.ID=GameState.genID();b.prototype.INIT=function(){f=false;guiMgr_SetLayerActiveStateAll(false);guiMgr_ResetAllGUILayers();Input_Init();guiMgr_ActivateGUILayer(GUI_LAYER.OPTIONS,true);StopSound(SOUND_MODE.MUSIC)};var f=false;b.prototype.UPDATE=function(){fbm_Update();if(f&&fbm_state==FBM_STATE_END){var h=oss_GetFacebookState();if(h>0){f=false;SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_GetCoins,false);SetTextAreaVisibility(GameData.k_gameOptions,GameData.k_Options_Txt_coins,false);SetGraphItemVisibility(GameData.k_gameOptions,GameData.k_Options_Gfx_coins,false);SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_Login,!true)}else{if(h<0){f=false;if(false&&RMS_GetRecordValue(RMS_RECORD_FACEBOOK_REWARD_GIVEN)==0){SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_GetCoins,true);SetTextAreaVisibility(GameData.k_gameOptions,GameData.k_Options_Txt_coins,true);SetGraphItemVisibility(GameData.k_gameOptions,GameData.k_Options_Gfx_coins,true);SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_Login,false)}else{SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_GetCoins,false);SetTextAreaVisibility(GameData.k_gameOptions,GameData.k_Options_Txt_coins,false);SetGraphItemVisibility(GameData.k_gameOptions,GameData.k_Options_Gfx_coins,false);SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_Login,true);SetButtonText(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_Login,getString(TEXT.MAIN_FB_LOGIN))}}else{f=false}}}guiMgr_processInputAllGuiLayers();guiMgr_updateLayers()};b.prototype.PAINT=function(){guiMgr_PaintGUILayers()};b.prototype.EXIT=function(){};function e(){GameState.scheduleSwitchState(GameState_MENUMAIN.ID,true,true);guiMgr_ActivateGUILayer(GUI_LAYER.OPTIONS,false);playSound(SOUND_TYPE.BACK_SFX,false)}_register_gui_message(GameData.k_gameOptions,d);function d(i,h){if(i==GUI_MESSAGE_INITIALIZE){gui_ResetAllLayerButtonsPressedState();guiMgr_SetLayerInputBlockState(guiMgr_GetGUILayerIndex(guiMgr_iCurrentLayerType),true);guiMgr_SetLayerPaintBlockState(guiMgr_GetGUILayerIndex(guiMgr_iCurrentLayerType),true);SetButtonEnabled(GameData.k_gameOptions,GameData.k_Options_btnReset,true);if(online_isOnlineEnabled()){if(false&&RMS_GetRecordValue(RMS_RECORD_FACEBOOK_REWARD_GIVEN)==0){gui_Options_SetFacebookGetCoins()}else{SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_GetCoins,false);SetTextAreaVisibility(GameData.k_gameOptions,GameData.k_Options_Txt_coins,false);SetGraphItemVisibility(GameData.k_gameOptions,GameData.k_Options_Gfx_coins,false);if(oss_GetFacebookState()>0){SetButtonText(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_Login,getString(TEXT.MAIN_FB_LOGOUT_BUTTON))}else{SetButtonText(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_Login,getString(TEXT.MAIN_FB_LOGIN))}}if(false&&countNewMessages()>0){SetGraphItemVisibility(GameData.k_gameOptions,GameData.k_Options_gfxNewMsg,true)}else{SetGraphItemVisibility(GameData.k_gameOptions,GameData.k_Options_gfxNewMsg,false)}SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_btnInbox,false)}else{SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_GetCoins,false);SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_BtnFacebook_Login,false);SetButtonVisibility(GameData.k_gameOptions,GameData.k_Options_btnInbox,false);SetGraphItemVisibility(GameData.k_gameOptions,GameData.k_Options_gfxNewMsg,false)}if(!isSoundModeEnabled(SOUND_MODE.MUSIC)||!isSoundModeEnabled(SOUND_MODE.SFX)){SetButtonText(GameData.k_gameOptions,GameData.k_Options_btnVibration,TEXT.MAIN_TEXT_OFF)}}if(i==GUI_MESSAGE_UPDATE){gui_UpdateGameLayerAnims(GameData.k_gameOptions)}if(i==GUI_MESSAGE_CLOSE){}if(i==GUI_MESSAGE_AFTER_PAINT){}if(i==GUI_MESSAGE_INPUT_EVENT){switch(h){case GameData.k_Options_btnExit:e();break;case GameData.k_Options_btnSettings:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,"Options/ Settings/ Not implemented yet!");break;case GameData.k_Options_btnInfo:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,"Options/ Info/ Not implemented yet!");break;case GameData.k_Options_btnPrivacy:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,"Options/ Privacy/ Not implemented yet!");break;case GameData.k_Options_btnVibration:if(isSoundModeEnabled(SOUND_MODE.MUSIC)||isSoundModeEnabled(SOUND_MODE.SFX)){StopSound(0);setSoundModeEnabled(SOUND_MODE.MUSIC,false);setSoundModeEnabled(SOUND_MODE.SFX,false);resetSound(0);StopSound(SOUND_MODE.MUSIC);StopSound(SOUND_MODE.SFX);SetButtonText(GameData.k_gameOptions,GameData.k_Options_btnVibration,TEXT.MAIN_TEXT_OFF);s_systemSound=false;GameVars_SetRecordValue(RMS_RECORD_MUSIC_ENABLED,s_systemSound?1:0);GameVars_SaveAll()}else{setSoundModeEnabled(SOUND_MODE.MUSIC,true);setSoundModeEnabled(SOUND_MODE.SFX,true);SetButtonText(GameData.k_gameOptions,GameData.k_Options_btnVibration,TEXT.MAIN_TEXT_ON);playSound(SOUND_TYPE.SELECT_SFX,false);s_systemSound=true;GameVars_SetRecordValue(RMS_RECORD_MUSIC_ENABLED,s_systemSound?1:0);GameVars_SaveAll()}break;case GameData.k_Options_btnLanguage:playSound(SOUND_TYPE.SELECT_SFX,false);GameState.scheduleSwitchState(GameState_LANGUAGE.ID,true,true);break;case GameData.k_Options_btnReset:playSound(SOUND_TYPE.SELECT_SFX,false);msgBox_AddMsgBox(MSGBOX_TYPE.YES_NO,getString(TEXT.MAIN_RESET_TEXT,IDefine.INDEX_MAIN),MSGBOX_CALLBACK.RESET_GAME_2NDCONFIRM,getString(TEXT.MAIN_TITLE_WARN,IDefine.INDEX_MAIN));break;case GameData.k_Options_btnCustomerCare:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,"Options/ CustomerCare/ Not implemented yet!");break;case GameData.k_Options_BtnFacebook_Login:playSound(SOUND_TYPE.SELECT_SFX,false);fbm_Reset();if(oss_GetFacebookState()>0){fbm_Logout();f=true}else{if(!SocialNetwork.isLoggedIn()){fbm_Login();f=true}}break;case GameData.k_Options_BtnFacebook_GetCoins:playSound(SOUND_TYPE.SELECT_SFX,false);fbm_Reset();fbm_LoginReward();f=true;break;case GameData.k_Options_btnInbox:playSound(SOUND_TYPE.SELECT_SFX,false);f=true;fbm_LoginInbox();break}}}_register_gui_message(GameData.k_gameIGM_Options_Popup,c);function c(i,h){if(i==GUI_MESSAGE_INITIALIZE){guiMgr_SetLayerInputBlockState(guiMgr_GetGUILayerIndex(guiMgr_iCurrentLayerType),true);gui_ResetAllLayerButtonsPressedState()}if(i==GUI_MESSAGE_UPDATE){}if(i==GUI_MESSAGE_CLOSE){}if(i==GUI_MESSAGE_INPUT_EVENT){switch(h){case GameData.k_IGM_Options_Popup_btnHelp:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,"k_IGM_Options_Popup_btnHelp/ Not implemented yet!");return;guiMgr_ActivateGUILayer(GUI_LAYER.IGM_TOP,false);guiMgr_ActivateGUILayer(GUI_LAYER.HELP,true);guiMgr_ActivateGUILayer(GUI_LAYER.IGM_OPTIONS_POPUP,false);playSound(SOUND_TYPE.SELECT_SFX,false);break;case GameData.k_IGM_Options_Popup_btnSettings:msgBox_AddMsgBox(MSGBOX_TYPE.CONFIRM,"k_IGM_Options_Popup_btnSettings/ Not implemented yet!");return;guiMgr_ActivateGUILayer(GUI_LAYER.IGM_TOP,false);guiMgr_ActivateGUILayer(GUI_LAYER.SETTINGS,true);guiMgr_ActivateGUILayer(GUI_LAYER.IGM_OPTIONS_POPUP,false);playSound(SOUND_TYPE.SELECT_SFX,false);break;case GameData.k_IGM_Options_Popup_btnBack:guiMgr_ActivateGUILayer(GUI_LAYER.EXPLOITS_SUBMENU,true);guiMgr_ActivateGUILayer(GUI_LAYER.IGM_OPTIONS_POPUP,false);playSound(SOUND_TYPE.SELECT_SFX,false);break}}}LowAPI.extendObject(a,{GameState_OPTIONS:b,},true)})(window);