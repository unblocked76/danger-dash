(function(t,f){var s=GLLibConfiguration.sound_numberOfChannels;var o=LowAPI.Gen_Array([SOUND_MODE.SIZE],false);var b=LowAPI.Gen_Array([s],0);var h=LowAPI.Gen_Array([s],false);function e(w){var v=false;for(var u=0;u<s;u++){if(b[u]==w){v=true}}return v}function c(v){if(v!=f){b[v]=-1}else{for(var u=0;u<s;u++){b[u]=-1}}}function j(){for(var u=0;u<s;u++){h[u]=false}}function i(v,u){o[v]=u}function m(u){return o[u]}function d(y,w,u){if(w===true){w=0}else{if(w===false){w=1}}var u=u;if(arguments.length<3){u=false}var v=(s_sound_data[n(y)][SOUND_DATA_DEF.TYPE]==SOUND_MODE.MUSIC);if(!u){if(v&&!o[SOUND_MODE.MUSIC]){return -1}if(!v&&!o[SOUND_MODE.SFX]){return -1}}var x;if(v){x=0}else{x=g(y)}if(x==-1){return -1}if(q(x)){a(x)}GLLibPlayer.Snd_Play(x,y,w,((v)?s_systemMusicVolume:s_systemSoundVolume),s_sound_data[n(y)][SOUND_DATA_DEF.PRIORITY]);b[x]=y;h[x]=true;return x}function g(z){var u=-1;var y=s_sound_data[n(z)][SOUND_DATA_DEF.PRIORITY];var v=y;var x=(s_sound_data[n(z)][SOUND_DATA_DEF.TYPE]==SOUND_MODE.MUSIC);for(var w=1;w<s;w++){if(q(w)||h[w]){if(h[w]){}if(b[w]<0){u=-1;break}if(x&&(s_sound_data[n(b[w])][SOUND_DATA_DEF.TYPE]==SOUND_MODE.MUSIC)){if(l(sound_getSoundPriority(z),sound_getSoundPriority(b[w]))){u=w}else{u=-1}break}else{if(l(v,s_sound_data[n(b[w])][SOUND_DATA_DEF.PRIORITY])){v=s_sound_data[n(b[w])][SOUND_DATA_DEF.PRIORITY];u=w}}}else{u=w;v=0;if(!x){break}}}return u}function l(v,u){return(v<u)}function p(w,v){var w=w;var v=v;if(arguments.length<2){v=true}if(arguments.length<1){w=SOUND_MODE.SFX}if(v&&(b[0]==SOUND_TYPE.SPLASH_MUSIC)){return}for(var u=0;u<s;u++){if(q(u)&&((b[u]<0)||(s_sound_data[n(b[u])][SOUND_DATA_DEF.TYPE]==w))){GLLibPlayer.Snd_Stop(u)}}}function a(u){if(b[0]==SOUND_TYPE.SPLASH_MUSIC){return}if(u<0){return}GLLibPlayer.Snd_Stop(u)}function q(v){var u=false;try{u=GLLibPlayer.Snd_IsPlaying(v)}catch(w){}return u}function r(){if(b[0]==SOUND_TYPE.SPLASH_MUSIC){return}GLLibPlayer.Snd_StopAllSounds()}function k(){try{var u=Object.keys(DATA);var x=u.indexOf("PACK_SOUND")+1;if(x<=1){throw new Error("Pls check me!!!!!")}Pack_LoadMIME(DATA.PACK_MIME_TYPE);GLLibPlayer.Snd_Init(DATA.SOUND_MAX);GLLibPlayer.Snd_SetMasterVolume(IDefine.SOUND_MASTER_VOLUME_LEVEL);for(var y=0;y<DATA.SOUND_MAX;y++){if(!GLLibPlayer.Snd_IsLoaded(y)){if(GLLibConfiguration.sound_allowURLCreation){var w=u[x+y];if(w=="SOUND_SFX_FEVER_LOOP_OGG"){w="SOUND_SFX_FEVER_LOOP"}var v=_ROOT_SCRIPT_PATH_+"\\sounds\\"+w.toLowerCase().substring("SOUND_".length)+".mp3";var z="audio/mpeg";GLLibPlayer.Snd_LoadSound(v,z,y,true)}else{GLLibPlayer.Snd_LoadSound(DATA.PACK_SOUND,y)}}}}catch(A){throw A}}function n(w){var u=-1;var x=false;for(var v=0;v<s_sound_data.length;++v){if(!x&&s_sound_data[v][SOUND_DATA_DEF.NAME]==w){x=true;u=v;break}}return u}LowAPI.extendObject(t,{isPlaying:e,resetSound:c,resetSoundStartedFlags:j,setSoundModeEnabled:i,playSound:d,StopSound:p,StopSoundChannel:a,StopAllSound:r,LoadSoundSystem:k,isSoundModeEnabled:m,},true)})(window);