(function(f,c){window.STAGE_DATA=function(n,o){this.m_stage_id=n;this.m_stage_data=o;STAGE_DATA.prototype.id=function(){return this.m_stage_id};STAGE_DATA.prototype.data=function(){return this.m_stage_data}};window.LOADING_DISPLAY_TYPE=function(){throw new Error("I am interface!")};LOADING_DISPLAY_TYPE.NONE=0;LOADING_DISPLAY_TYPE.FULL=1;function d(o){if(typeof o=="undefined"){throw new Error("missing param id")}if(typeof d.s_All_States=="undefined"){d.s_All_States=[]}for(var n=0;n<d.s_All_States.length;n++){if(d.s_All_States[n].ID==o){throw new Error("The id "+o+" has been used, please set the other id for this state!")}}d.s_All_States[d.s_All_States.length]=this;this.ID=o;this.m_aoLoadingStages=null;this.m_oLoadingDisplayInfo=null;if(arguments.length==2){if(arguments[1].length>=1){this.m_aoLoadingStages=arguments[1][0]}if(arguments[1].length>=2){this.m_oLoadingDisplayInfo=arguments[1][1]}}this.m_aaListenerStateMessages=[]}d.MESSAGE_INIT=0;d.MESSAGE_UPDATE=1;d.MESSAGE_PAINT=2;d.MESSAGE_EXIT=3;d.MESSAGE_HIDENOTIFY=4;d.MESSAGE_SHOWNOTIFY=5;d.MESSAGE_NAV_NEXT=6;d.MESSAGE_NAV_HOME=7;d.MESSAGE_NAV_SHOP=8;d.MESSAGE_BUY_EXPLOIT=9;d.MESSAGE_BUY_ITEM=10;d.s_iCurrentState=-1;d.s_iNextState=-1;d.s_bCallInitEvent=true;d.s_bCallExitEvent=true;var b=0;var h=24;var l=[];var m=1000;var e=0;var k=0;var i=0;d.genID=function(){return i++};d.getCurrentState=function(){return d.getState(d.s_iCurrentState)};d.getState=function(o){if(typeof d.s_All_States=="undefined"){d.s_All_States=[]}for(var n=0;n<d.s_All_States.length;n++){if(d.s_All_States[n].ID==o){return d.s_All_States[n]}}return null};d.scheduleSwitchState=function(o,p,n){if(typeof o=="undefined"){throw new Error("GameState.scheduleSwitchState : invalid params")}d.s_iNextState=o;d.s_bCallInitEvent=typeof n!="undefined"?n:true;d.s_bCallExitEvent=typeof p!="undefined"?p:true};d.handleSwitchState=function(){if(d.s_iNextState!==-1&&d.s_iCurrentState!==d.s_iNextState){var o=d.getState(d.s_iCurrentState);if(o!=null&&d.s_bCallExitEvent){o.handleMessage(d.MESSAGE_EXIT)}var p=d.getState(GameState_LOAD.ID);var q=d.s_iNextState;var n=function(){p.handleMessage(d.MESSAGE_EXIT);d.s_iCurrentState=q;var r=d.getState(q);if(r!=null&&d.s_bCallInitEvent){r.handleMessage(d.MESSAGE_INIT)}};p.handleMessage(d.MESSAGE_INIT,q,n);d.s_iCurrentState=GameState_LOAD.ID;d.s_iNextState=-1;return true}else{return false}};d.prototype.getLoadingStages=function(){return this.m_aoLoadingStages};d.prototype.getLoadingDisplayInfo=function(){return this.m_oLoadingDisplayInfo};d.prototype.setListenerStateMessage=function(n,o){if(LowAPI.isUndefined(this.m_aaListenerStateMessages[n])){this.m_aaListenerStateMessages[n]=[]}this.m_aaListenerStateMessages[n].push(o)};d.prototype.sendMessage=function(p){var o=this.m_aaListenerStateMessages[p];if(o){for(var q=0,n=o.length;q<n;q++){o[q].apply(this,Array.prototype.slice.call(arguments,1))}}};d.prototype.handleMessage=function(n){switch(n){case d.MESSAGE_INIT:k=0;break;case d.MESSAGE_UPDATE:k+=s_game_frameDT;k&=65535;b=s_game_frameDT;s_game_frameDT=Math.min(s_game_frameDT,60);break;case d.MESSAGE_PAINT:break;case d.MESSAGE_EXIT:case d.MESSAGE_HIDENOTIFY:case d.MESSAGE_SHOWNOTIFY:}if(n==d.MESSAGE_UPDATE&&!s_debug_isUpdateGameplay&&!s_debug_isUpdateOneFrame){return}else{this.sendMessage.apply(this,arguments)}if(s_debug_isUpdateOneFrame){s_debug_isUpdateGameplay=false;s_debug_isUpdateOneFrame=false}switch(n){case d.MESSAGE_INIT:break;case d.MESSAGE_UPDATE:break;case d.MESSAGE_PAINT:a();break;case d.MESSAGE_EXIT:case d.MESSAGE_HIDENOTIFY:case d.MESSAGE_SHOWNOTIFY:}};function a(){if(false){var n=b;if(n==0){n=1}var q=LowAPI.Float2Int(1000/n);if(l.length>h){l.shift()}l.push(q);m=1000;e=0;for(var p=0;p<l.length;p++){var o=l[p];if(m>o){m=o}if(e<o){e=o}}if(s_sprFontMid){var r=VERSION+"-"+(Graphics.is3D?"3d":"2d")+"-"+h+"F: "+m+" < "+q+" < "+e;s_sprFontMid.DrawString(g,r,10,800-50,0)}}}(function j(){Object.defineProperty(f,"s_iGameStateTime",{get:function(){return k},set:function(n){throw new Error("Not allow!")}})})();f.GameState=d})(window);