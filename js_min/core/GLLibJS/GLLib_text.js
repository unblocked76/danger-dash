(function(Y,m){var ad="GLLib_text.js";var s="EN",e="US",V="DE",af="FR",ag="IT",q="ES",p="BR",O="PT",P="JP",a="CN",t="KR",b="RU",w="TR",W="PL",aa="CZ",y="NL",F="TH",Z="VI",K="AR",ab="SC",H="TC",h="ID";var S=11,J=(1<<S)-1,ac=1000,R="@",v="%",f=167,N=String.fromCharCode(11904),L=" ",z=String.fromCharCode(160),Q=1;var d;var E="UTF-8";var i=[];var c=[];function B(ah){switch(ah){case GLLang.EN:return s;case GLLang.US:return e;case GLLang.DE:return V;case GLLang.FR:return af;case GLLang.IT:return ag;case GLLang.ES:return q;case GLLang.BR:return p;case GLLang.PT:return O;case GLLang.JP:return P;case GLLang.CN:return a;case GLLang.KR:return t;case GLLang.RU:return b;case GLLang.PL:return W;case GLLang.TR:return w;case GLLang.CZ:return aa;case GLLang.NL:return y;case GLLang.TH:return F;case GLLang.VI:return Z;case GLLang.AR:return K;case GLLang.SC:return ab;case GLLang.TC:return H;case GLLang.ID:return h}return null}function n(ai){var ah=false;if(ai==GLLang.EN){ah=true}if(ai==GLLang.US){ah=false}if(ai==GLLang.BR){ah=true}if(ai==GLLang.DE){ah=true}if(ai==GLLang.ES){ah=true}if(ai==GLLang.FR){ah=true}if(ai==GLLang.IT){ah=true}if(ai==GLLang.PL){ah=false}if(ai==GLLang.RU){ah=true}if(ai==GLLang.TR){ah=true}if(ai==GLLang.VI){ah=true}if(ai==GLLang.TH){ah=true}if(ai==GLLang.PT){ah=false}if(ai==GLLang.JP){ah=true}if(ai==GLLang.KR){ah=true}if(ai==GLLang.CN){ah=false}if(ai==GLLang.AR){ah=false}if(ai==GLLang.SC){ah=true}if(ai==GLLang.TC){ah=true}if(ai==GLLang.ID){ah=true}return ah}function G(ah){return DATA["TEXT_"+B(ah)+"_MAX"]}function x(ah){if(ah==m){ah=d}return DATA["PACK_TEXT_"+B(ah)]}function r(ah){d=ah}function A(ah){E=ah}function C(ak){if(ak==m){ak=d}var ah=x(ak);Dbg(ad+"# loadText "+B(ak));var aj=G(ak);for(var ai=0;ai<aj;ai++){l(ah,ai)}}function I(ah){if(c){c[ah]=[]}if(i){i[ah]=0}}function l(aj,ak){I(ak);Pack_Open(aj);var ah=Pack_ReadData(ak);var al=new ByteArrayInputStream(ah);var ai=g(al);if(ai!=ak){throw new Error("TBC")}if(GLLibConfig.text_useStringCache){M(ak)}Pack_Close()}function g(am){var ai=Stream_Read(am);if(!(ai<GLLibConfig.text_maxPacks)){Assert(false,"Text_LoadTextFromStream: Trying to load a tab higher than GLLibConfig.text_maxPacks!")}i[ai]=Stream_Read32(am);if(i[ai]>(1<<GLLibConfig.text_maxStringsLog2)){Assert(false,"WARNING! You are loading a text pack with more than "+(1<<GLLibConfig.text_maxStringsLog2)+" strings! All extras will be ignored");i[ai]=(1<<GLLibConfig.text_maxStringsLog2)}var aj=[];aj[0]=0;for(var ak=1;ak<i[ai]+1;ak++){aj[ak]=Stream_Read32(am)}c[ai]=[];for(var ak=0;ak<i[ai];ak++){var ah=aj[ak+1]-aj[ak];var al=[];if(ah>0){Stream_ReadFully(am,al,0,ah);c[ai][ak]=al}}return ai}function M(ai){for(var aj=0,ah=i[ai]|0;aj<ah;aj++){o(aj+(ai<<GLLibConfig.text_maxStringsLog2))}}function X(ah,ai){var ai=!LowAPI.isUndefined(ai)?ai:0;return o(ah+(ai<<S))}function D(am,aj,ak){if(aj==m){aj=d}if(ak==m){ak=z}if(am<1000){return""+am}else{var ah="";switch(aj){case GLLang.EN:case GLLang.US:case GLLang.JP:case GLLang.KR:case GLLang.CN:case GLLang.TH:case GLLang.AR:case GLLang.SC:case GLLang.TC:ah=",";break;case GLLang.DE:case GLLang.BR:case GLLang.IT:case GLLang.VI:case GLLang.ID:ah=".";break;case GLLang.PL:case GLLang.CZ:ah=ak;break;case GLLang.FR:case GLLang.ES:case GLLang.PT:case GLLang.RU:if(am>=10000){ah=ak}break;case GLLang.TR:case GLLang.NL:if(am>=10000){ah="."}break;default:return""+am}if(true){return am.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+ah)}else{var al="";var ai=((am%1000)<0?-(am%1000):(am%1000));am=LowAPI.Float2Int(am/1000);while(ai!=0||am!=0){if(ai<10){al="00"+((ai)<0?-(ai):(ai))+al}else{if(ai<100){al="0"+((ai)<0?-(ai):(ai))+al}else{al=((ai)<0?-(ai):(ai))+al}}ai=am%1000;am=LowAPI.Float2Int(am/1000);if(am!=0){al=ah+al}else{if(ai!=0){al=ai+ah+al;ai=0}}}return al}}}function j(ai){var ao=new Uint8Array(ai);var aj,al,ah,an;var am,ak;aj="";ah=ao.length;al=0;while(al<ah){an=ao[al++];switch(an>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:aj+=String.fromCharCode(an);break;case 12:case 13:am=ao[al++];aj+=String.fromCharCode(((an&31)<<6)|(am&63));break;case 14:am=ao[al++];ak=ao[al++];aj+=String.fromCharCode(((an&15)<<12)|((am&63)<<6)|((ak&63)<<0));break}}return aj}function o(ah){var ak=ah>>GLLibConfig.text_maxStringsLog2;var aj=ah&((1<<GLLibConfig.text_maxStringsLog2)-1);if(c&&c[ak]&&c[ak][aj]){if(typeof c[ak][aj]!=="string"){var ai=c[ak][aj];var al=j(ai);c[ak][aj]=al}return c[ak][aj]}else{return null}}function u(al,ai,aj){var ak=0;var am="";for(var ah=0;ah<al.length;ah++){if(al.charAt(ah)==aj){am+=ai[ak];ak++}else{am+=al.charAt(ah)}}return am}function T(ai,ak){var aj="";for(var ah=0;ah<ai.length;ah++){var am=ai.charAt(ah);if(am=="#"){am=ai.charAt(++ah);if(am.castToInt()>="1".castToInt()&&am<="9".castToInt()){var al=(am.castToInt()-"1".castToInt());aj+=ak[al]}else{aj+="#";aj+=am}}else{aj+=am}}return aj}function ae(ah){var aj;var ak=false;if(ah==null){return false}for(var ai=0;ai<ah.length;ai++){aj=ah.charAt(ai);if((aj!=L)&&(s_sprFontMid.GetCharFrame(aj.castToInt())==1)){Warn("GLLib_text.js: text_stringUsesExoticChars() - _zString:"+ah+" - Char["+ai+"] : "+aj+" value:"+(aj.castToInt()));ak=true;break}}return ak}(function k(){Object.defineProperty(Y,"s_iCurrentLanguage",{get:function(){return d},set:function(ah){throw new Error("Not allow!")}})})();(function U(){LowAPI.extendObject(Y,{Text_SetEncoding:A,Text_FormatNumber:D,text_GetFormatNumber:D,text_GetFormatNumber_Long:D,getString:X,setCurrentLanguage:r,isLanguageSupported:n,text_loadTexts:C,getFormattedString:u,getFormattedStringEx:T,getPackNameFromLanguage:x,text_stringUsesExoticChars:ae,},true)})()})(window);