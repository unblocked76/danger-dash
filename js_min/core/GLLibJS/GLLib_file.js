(function(W,l){var G=0,Q=1,O=2;var u=1,ab=2,Y=3;var a=0;var M=null;var ah=false;var ac=null;var J=0;var af=0;var o=null;var V=null;var ae=null;var d=null;var S=null;var z=0;var ad=0;var v=0;var X=0;var t=false;var y=null;var p=null;function A(ak){if(M!=null){if(ak!=null&&ak==ac){return}}a=u;K(ak,0)}function K(aq,au,am,at){var am=!LowAPI.isUndefined(am)?am:null;var at=!LowAPI.isUndefined(at)?at:0;ae=aq;S=am;z=at;if(M!=null){if(aq!=null&&aq==ac){if(J==au){return M}else{R()}}else{c()}}if(M==null){if(au>0){aq+="."+au}var ao=ai(aq);J=au;ah=ao.markSupported();if(au==0){ac=aq;af=ao.available();var ap=ao.read()|(ao.read()<<8);v=ap;var ak=ap<<2,an=2+ak,ar=ao.available()-ak;o=[];for(var al=0;al<ap;al++){ak=(ao.read())|(ao.read()<<8)|(ao.read()<<16)|(ao.read()<<24);o[al]=ak}ad=o[0]}else{ad=0}M=ao}return M}function R(){if(M!=null){M.close();M=null;d=null}}function c(){R();ac=null;o=null;V=null}function aj(ap){if(!(ac!=null)){Assert(false,"Pack_PositionAtData_CORE: m_streamId is null!")}var ao=o[ap],ak=o[ap+1]-ao-1,an=0;while(ao>af){ao-=af;an++}var al=K(ac,an);var am=al.available();if(ad>ao){if(GLLibConfig.pack_CORE_UseStreamReset==true&&ah==true){al.reset();ad=0}else{R();al=K(ac,an)}}al.skip(ao-ad);s(al.read());t=false;ad=ao+1;return ak}function g(){if(arguments){switch(arguments.length){case 1:return i.apply(this,arguments);case 3:if(typeof arguments[0]=="number"){return k.apply(this,arguments)}else{return j.apply(this,arguments)}}}throw new Error("InvalidArguments")}function i(ak){if(!(ac!=null)){Assert(false,"Pack_ReadData_CORE: m_streamId is null!")}return g(ac,ak,false)}function k(ak,an,am){var al=null;if(m_basepath!=null&&m_resource!=null){al=g(m_basepath+m_resource[ak],an,am)}return al}function j(aq,ao,ar){var am=null;A(aq);var at=aj(ao);var an=M;var al=an.available(),ak=0,ap=0;am=[];while(at>0){ak=F(an,am,ap,Math.min(at,al));ap+=ak;ad+=ak;at-=ak;if(at==0){break}else{if(ak==-1){break}}an=K(aq,J+1);al=an.available()}if(ar==true){R()}return am}function F(am,an,ak,al){return am.read(an,ak,al)}function B(ak){A(ak)}function ai(al){var ak=null;if(a==Y){ak=new ByteArrayInputStream(S,z,S.length-z)}else{if(a==ab){throw new Error("Not supported")}else{if(a==u){ak=s_gllib_instance.GetResourceAsStream(al)}}}return ak}function D(){e();if(a==Y){S=null}else{if(a==ab){throw new Error("Not supported")}}}function e(){c()}function ag(ak){var al=aj(ak),am=0;d=M;am=M.available();if(al>am){al=am}return al}function s(ak){X=ak;if(GLLibConfig.pack_supportLZMADecompression&&(X>=127)){X-=127;t=true}}function x(ak){return g(ak)}function r(ak){if(ak>0){ad+=d.skip(ak)}}function w(al){if(al==l){al=false}var ak=d.read();if(ak>=0){ad++}else{if(al){throw new Error("Pack_Read.EOF")}else{Assert(false,"Pack_Read.EOF")}}return ak}function I(){var ak=d.readByte();ad++;return ak}function h(){var ak=((w(true))|((w(true))<<8));return ak}function U(){var ak=d.readShort();ad+=2;return ak}function H(){return(((w(true))|((w(true))<<8))|(((w(true))<<16)|((w(true))<<24)))|0}function N(ap,ao,al){if(!(ap!=null)){Assert(false,"Pack_ReadFully.array is null")}if(!(ao>=0)){Assert(false,"Pack_ReadFully.offset is negative")}if(!(al>=0)){Assert(false,"Pack_ReadFully.length is negative")}var an=ao;var ak=al;var am=0;if(ak>0){am=d.read(ap,an,ak);if(!(am>=0)){Assert(false,"Pack_ReadFully.EOF")}ak-=am;an+=am}ad+=al;return al}function P(ak){if(GLLibConfig.pack_use_CORE_ResourceManager){if(!(ak>=0)){Assert(false,"Pack_ReadArray.idx is invalid")}var al=new ByteArrayInputStream(x(ak));return n(al)}else{return Pack_ReadArray_INI(ak)}}function C(al){if(!(al!=null)){Assert(false,"Pack_LoadMIME.filename is null")}if(p==null){var ao=d;d=ai(al);var am=w();if(true&&(GLLibConfig.pack_dbgDataAccess)){Dbg("nb Of MIME type : "+am)}p=[];for(var an=0;an<am;an++){var ak=w();p[an]=[];N(p[an],0,ak)}try{d.close()}catch(ap){Assert(false,"Pack_LoadMIME.IO Error");Err(ap)}d=ao}}function L(){return X}function Z(ak){if(!(p!=null)){Assert(false,"GetMIME. MIME type not loaded yet, use Pack_LoadMIME first")}if(ak>=p.length){return""}else{try{return String.byteArray2Text(p[ak],"UTF-8")}catch(al){return""}}}function n(an){if(!(an!=null)){Assert(false,"Mem_ReadArray.is is null")}var ap=null;try{var aq=E(an);var al;var at=aq>>4;var ar=aq&7;if((aq&8)!=0){al=aa(an)}else{al=E(an)}switch(ar){case G:var au=[];for(var am=0;am<al;am++){au[am]=an.readByte()}ap=au;break;case Q:var au=[];if(at==G){for(var am=0;am<al;am++){au[am]=an.readByte()}}else{for(var am=0;am<al;am++){au[am]=an.readShort()}}ap=au;break;case O:var au=[];if(at==G){for(var am=0;am<al;am++){au[am]=an.readByte()}}else{if(at==Q){for(var am=0;am<al;am++){au[am]=an.readShort()}}else{for(var am=0;am<al;am++){au[am]=m(an)}}}ap=au;break;default:var ak=[];for(var am=0;am<al;am++){ak[am]=n(an)}ap=ak;break}}catch(ao){throw ao}return ap}function b(al,ak){return((al[ak++]&255)|((al[ak++]&255)<<8)).castToShort()}function E(ak){var al=ak.read();return al}function aa(ak){return ak.readUShort()}function m(ak){return ak.readInt()}function T(al,an,am,ak){if(!(an!=null)){Assert(false,"Stream_ReadFully.array is null")}if(!(am>=0)){Assert(false,"Stream_ReadFully.offset is negative")}if(!(ak>=0)){Assert(false,"Stream_ReadFully.length is negative")}return al.read(an,am,ak)}GLLib.prototype.GetResourceAsStream=function(ak){return ResourceLoader.getResourceAsStream(ak)};function f(ap,an){if(!(p!=null)){Assert(false,"GetMIMEIndex: MIME type not loaded yet, use Pack_LoadMIME first")}for(var al=0;al<p.length;al++){if(Z(al)==ap){return al}}throw new Error("GetMIMEIndex: MIME type "+ap+" not found");if(an){Dbg("GetMIMEIndex: Adding new MIME type to list!");var ak=p.length;var am=[];for(var al=0;al<ak-2;al++){am[al]=p[al]}try{am[ak-1]=ap.getBytes("UTF-8")}catch(ao){Dbg("GetMIMEType: UTF-8 not supported!")}p=am;return ak-1}return -1}function q(al,ao,an,am,ak){System.arraycopy(al,ao,an,am,ak)}LowAPI.extendObject(W,{Pack_Open:B,Pack_PositionAtData:ag,Pack_Close:D,Pack_ReadData:x,Pack_Skip:r,Pack_Read:w,Pack_readU8:w,Pack_readS8:I,Pack_Read16:h,Pack_readS16:U,Pack_Read32:H,Pack_readS32:H,Pack_ReadArray:P,Pack_ReadFully:N,Pack_LoadMIME:C,Stream_Read:E,Stream_Read16:aa,Stream_Read32:m,Stream_ReadFully:T,Mem_ArrayCopy:q,Mem_GetShort:b,Mem_ReadArray:n,GetMIME:Z,GetMIMEIndex:f,Pack_GetLastDataReadMimeType:L,},true)})(window);